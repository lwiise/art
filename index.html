<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Finna Art — Gallery</title>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet" />
<style>
  :root{
    --bg:#fff;
    --text-main:#222;
    --accent:#333;
    --card-radius:32px;
    --btn-radius:30px;
  }

  *,*::before,*::after{ box-sizing:border-box; -webkit-font-smoothing:antialiased; }
  body{
    margin:0; height:100vh; width:100vw;
    background:var(--bg);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
    color:var(--text-main);
    overflow:hidden;
  }

  .layout{ display:flex; height:100%; width:100%; overflow:hidden; }

  /* ===== LEFT MAP ===== */
  #map{ flex:0 0 31vw; height:100vh; background:#000; position:relative; }

  .mapboxgl-canvas{ outline:none; filter:grayscale(100%) contrast(1.2) brightness(0.9); }

  /* ===== SIDE NAV (DESKTOP) ===== */
  .side-nav{
    position:absolute; top:50%; right:0; transform:translateY(-50%);
    display:flex; flex-direction:column; z-index:50;

    /* darker bg (as requested) */
    background:rgba(0,0,0,0.55);
    backdrop-filter:blur(15px); -webkit-backdrop-filter:blur(15px);

    border-radius:20px 0 0 20px;
    border-left:1px solid rgba(255,255,255,0.10);
    border-top:1px solid rgba(255,255,255,0.10);
    border-bottom:1px solid rgba(255,255,255,0.10);
    box-shadow:-10px 0 30px rgba(0,0,0,0.35);
    transition:background .25s ease,border-color .25s ease;
  }
  .side-nav.focused{
    background:rgba(0,0,0,0.70);
    border-color:rgba(255,255,255,0.10);
  }

  .nav-item{
    padding:30px 40px;
    color:rgba(255,255,255,0.85);
    font-weight:700;
    font-size:14px;
    text-transform:uppercase;
    letter-spacing:.05em;
    border-bottom:1px solid rgba(255,255,255,0.10);
    transition:all .25s ease;
    cursor:pointer;
    text-align:center;
    text-shadow:0 2px 10px rgba(0,0,0,0.5);
    user-select:none;
  }
  .nav-item:last-child{ border-bottom:none; }
  .nav-item:hover,
  .nav-item.active{
    background:rgba(255,255,255,0.18);
    color:#fff;
    padding-right:50px;
  }

  /* ===== RIGHT SHOP ===== */
  .shop{
    flex:1;
    display:flex;
    flex-direction:column;
    height:100vh;
    background:#fff;
    position:relative;
    z-index:2;
    box-shadow:-10px 0 40px rgba(0,0,0,0.05);
    width:69vw; /* requested */
  }

  /* DESKTOP SECTIONS */
  .app-section{
    position:absolute; inset:0;
    display:flex; flex-direction:column;
    background:#fff;
    opacity:0; visibility:hidden; pointer-events:none;
    transform:translateY(20px);
    transition:opacity .35s ease, transform .35s ease;
    z-index:1;
    padding:40px;
    overflow-y:auto;
    height:100%;
  }
  .app-section.active-section{
    opacity:1; visibility:visible; pointer-events:auto;
    transform:translateY(0);
    z-index:10;
  }

  #sect-gallery{ padding:0; }

  .shop-head{
    flex-shrink:0;
    position:sticky; top:0;
    background:rgba(255,255,255,0.95);
    backdrop-filter:blur(10px);
    z-index:10;
    padding:24px 30px;
    display:flex;
    align-items:center;
    justify-content:space-between;
    border-bottom:1px solid #f0f0f0;
  }

  .nav-group{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:wrap;
  }
  .chip{
    border:none;
    background:transparent;
    font-size:14px;
    color:#999;
    cursor:pointer;
    padding:8px 12px;
    transition:all .2s;
    font-weight:600;
    white-space:nowrap;
  }
  .chip:hover{ color:#333; }
  .chip.active{
    background:var(--accent);
    color:#fff;
    padding:8px 24px;
    border-radius:var(--btn-radius);
  }

  .shop-body{
    padding:20px 30px 60px;
    flex-grow:1;
    overflow-y:auto;
    min-height:0;
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
    gap:40px 20px;
    width:100%;
  }

  .card{
    background:#fff;
    border:1px solid #f4f4f4;
    border-radius:var(--card-radius);
    padding:30px 20px;
    cursor:pointer;
    transition:all .3s cubic-bezier(.25,.8,.25,1);
    display:flex; flex-direction:column; align-items:center; text-align:center;
  }
  .card:hover{ transform:translateY(-6px); box-shadow:0 15px 40px rgba(0,0,0,0.06); }
  .card-media{ width:100%; height:180px; display:flex; align-items:center; justify-content:center; margin-bottom:20px; position:relative; }
  .card-media img{ max-width:100%; max-height:100%; object-fit:contain; filter:drop-shadow(0 10px 15px rgba(0,0,0,0.1)); }
  .card-name{ font-size:13px; font-weight:900; letter-spacing:.08em; color:#b0b0b0; text-transform:uppercase; margin-bottom:6px; }
  .card-sub{ font-size:10px; color:#ccc; text-transform:uppercase; letter-spacing:.05em; }

  /* ===== HOME ===== */
  .home-hero{
    width:100%;
    height:350px;
    border-radius:24px;
    margin-top:24px;
    margin-bottom:30px;
    position:relative;

    /* switched to logo hero (requested: keep only ONE image, big one) */
    background:#f2f2f2;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }
  .home-hero-logo{
    width:min(340px, 74%);
    height:auto;
    border-radius:18px;
    box-shadow:0 10px 24px rgba(0,0,0,0.12);
  }

  h1.sec-title{ font-size:32px; font-weight:900; margin-bottom:10px; letter-spacing:-0.02em; color:#111; }
  p.sec-sub{ font-size:16px; color:#666; line-height:1.6; max-width:650px; margin-bottom:30px; }

  .btn-hero{
    display:inline-block;
    width:auto !important;
    padding:14px 36px;
    background:#111;
    color:#fff;
    border:none;
    border-radius:50px;
    font-size:14px;
    font-weight:800;
    cursor:pointer;
    margin-top:15px;
    box-shadow:0 8px 20px rgba(0,0,0,0.15);
    align-self:flex-start;
    transition:transform .15s ease, box-shadow .15s ease, background .15s ease;
  }
  .btn-hero:hover{ transform:translateY(-3px); box-shadow:0 12px 25px rgba(0,0,0,0.2); background:#000; }

  /* ===== ABOUT ===== */
  .about-hero-img{
    width:100%;
    border-radius:16px;
    margin:18px 0 22px;
    display:block;
  }
  .about-block{
    background:#fafafa;
    border:1px solid #eee;
    border-radius:18px;
    padding:18px 18px;
    margin:14px 0 0;
  }
  .about-block h3{
    margin:0 0 8px;
    font-size:14px;
    letter-spacing:.08em;
    text-transform:uppercase;
    color:#999;
  }
  .about-block p{ margin:0; color:#555; line-height:1.7; font-size:14px; }
  .about-grid{
    margin-top:14px;
    display:grid;
    grid-template-columns:repeat(2,minmax(0,1fr));
    gap:12px;
  }
  .about-pill{
    background:#fff;
    border:1px solid #eee;
    border-radius:16px;
    padding:14px;
  }
  .about-pill b{ display:block; font-size:12px; color:#111; margin-bottom:6px; }
  .about-pill span{ display:block; font-size:13px; color:#666; line-height:1.55; }

  /* ===== SERVICES (like your screenshot) ===== */
  .services-wrap{
    border-radius:24px;
    overflow:hidden;
    border:1px solid #eee;
    background:
      repeating-linear-gradient(135deg, rgba(0,0,0,0.03) 0px, rgba(0,0,0,0.03) 2px, transparent 2px, transparent 10px),
      #fff;
    padding:28px 24px 30px;
  }
  .services-grid{
    display:grid;
    grid-template-columns:repeat(4,minmax(0,1fr));
    gap:26px 22px;
  }
  .svc-item{
    text-align:center;
    padding:10px 10px 0;
  }
  .svc-ico{
    width:54px; height:54px;
    margin:0 auto 12px;
    border-radius:999px;
    display:grid; place-items:center;
    color:#777;
  }
  .svc-ico svg{ width:34px; height:34px; opacity:.75; }
  .svc-title{
    margin:0 0 10px;
    font-size:22px;
    font-weight:500;
    color:#222;
  }
  .svc-desc{
    margin:0;
    font-size:13px;
    line-height:1.7;
    color:#777;
    max-width:260px;
    margin-inline:auto;
  }

  /* ===== SOLO PRODUCT ===== */
  .solo-wrap{ display:none; animation:slideIn .5s cubic-bezier(.2,.8,.2,1); }
  #sect-gallery.solo .grid{ display:none; }
  #sect-gallery.solo .solo-wrap{ display:block; }

  .back-nav{ margin-bottom:20px; }
  .btn-back{ background:none; border:none; padding:0; color:#999; font-size:13px; font-weight:700; cursor:pointer; display:flex; align-items:center; gap:6px; }

  .solo-media-container{
    width:100%;
    height:400px;
    background:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    margin-bottom:20px;
    position:relative;
    border-radius:22px;
    overflow:hidden;
    border:1px solid #f0f0f0;
  }

  /* product tabs (Images / 360 / Video / 3D) – top-right, “out of the frame” */
  .media-tabs{
    position:absolute;
    top:14px; right:14px;
    display:flex;
    gap:8px;
    z-index:5;
  }
  .media-tab{
    border:none;
    padding:8px 14px;
    border-radius:999px;
    background:rgba(0,0,0,0.55);
    color:rgba(255,255,255,0.88);
    font-size:12px;
    font-weight:800;
    letter-spacing:.04em;
    cursor:pointer;
    transition:background .15s ease, transform .1s ease;
    backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px);
  }
  .media-tab:hover{ background:rgba(0,0,0,0.68); transform:translateY(-1px); }
  .media-tab.active{ background:#000; color:#fff; }

  .stage{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; }
  .stage img{ width:100%; height:100%; object-fit:cover; }

  model-viewer{ width:100%; height:100%; }

  /* simple arrows for Images */
  .img-arrow{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    width:42px; height:42px;
    border-radius:999px;
    border:0;
    background:rgba(0,0,0,0.35);
    color:#fff;
    font-size:18px;
    font-weight:900;
    cursor:pointer;
    z-index:6;
    display:grid; place-items:center;
    backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px);
  }
  .img-arrow:hover{ background:rgba(0,0,0,0.5); }
  .img-arrow.left{ left:14px; }
  .img-arrow.right{ right:14px; }

  /* custom 360 controls (like your screenshot) */
  .ctrl-bar{
    position:absolute;
    left:50%;
    transform:translateX(-50%);
    bottom:18px;
    width:min(740px, 88%);
    height:44px;
    border-radius:999px;
    background:rgba(0,0,0,0.42);
    display:flex;
    align-items:center;
    gap:12px;
    padding:0 14px;
    z-index:7;
    backdrop-filter:blur(10px); -webkit-backdrop-filter:blur(10px);
  }
  .ctrl-btn{
    width:34px; height:34px;
    border-radius:10px;
    border:none;
    background:rgba(255,255,255,0.12);
    color:#fff;
    cursor:pointer;
    display:grid; place-items:center;
  }
  .ctrl-btn:hover{ background:rgba(255,255,255,0.18); }
  .ctrl-range{
    flex:1;
    -webkit-appearance:none;
    appearance:none;
    height:6px;
    border-radius:999px;
    background:rgba(255,255,255,0.22);
    outline:none;
  }
  .ctrl-range::-webkit-slider-thumb{
    -webkit-appearance:none;
    appearance:none;
    width:40px;
    height:18px;
    border-radius:999px;
    background:rgba(255,255,255,0.85);
    cursor:pointer;
    border:none;
  }

  .solo-info-block{ padding:0 10px; }
  .solo-desc{
    text-align:left;
    color:#666;
    font-size:14px;
    line-height:1.6;
    border-top:1px solid #eee;
    padding-top:24px;
    margin-bottom:30px;
  }
  .data-row{ display:flex; gap:30px; margin-top:16px; flex-wrap:wrap; }
  .data-item span:first-child{ display:block; font-size:10px; color:#999; text-transform:uppercase; font-weight:800; margin-bottom:4px; }
  .data-item span:last-child{ font-size:15px; font-weight:800; color:#222; }

  .artist-profile{
    display:flex; align-items:center; gap:14px;
    margin-top:30px;
    padding:16px;
    background:#fafafa;
    border-radius:20px;
    cursor:pointer;
    transition:all .2s;
    border:1px solid transparent;
  }
  .artist-profile:hover{ background:#fff; border-color:#eee; box-shadow:0 5px 15px rgba(0,0,0,0.05); transform:translateY(-2px); }
  .avatar{ width:44px; height:44px; border-radius:50%; background:#eee; overflow:hidden; }
  .avatar img{ width:100%; height:100%; object-fit:cover; }
  .artist-info{ flex:1; }
  .artist-info h4{ margin:0; font-size:13px; color:#222; }
  .artist-info p{ margin:2px 0 0; font-size:11px; color:#888; }
  .artist-cta{ font-size:11px; font-weight:900; color:#333; text-transform:uppercase; letter-spacing:.05em; }

  .actions{ display:flex; gap:12px; margin-top:30px; }
  .btn{ padding:14px 20px; border-radius:14px; border:none; font-size:13px; font-weight:800; cursor:pointer; transition:transform .1s; }
  .btn:active{ transform:scale(.96); }
  .btn-primary{ background:#111; color:#fff; flex:1; }
  .btn-ghost{ background:#f0f0f0; color:#666; }

  /* MODALS */
  .modal-overlay{
    position:fixed; top:0; left:0;
    width:100%; height:100%;
    background:rgba(0,0,0,0.4);
    backdrop-filter:blur(4px);
    z-index:9999;
    display:none;
    align-items:center;
    justify-content:center;
    opacity:0;
    transition:opacity .3s ease;
  }
  .modal-overlay.open{ display:flex; opacity:1; }
  .modal-box{
    background:#fff;
    width:90%;
    max-width:400px;
    padding:30px;
    border-radius:24px;
    box-shadow:0 20px 40px rgba(0,0,0,0.2);
    transform:translateY(20px);
    transition:transform .3s cubic-bezier(.2,.8,.2,1);
    position:relative;
    max-height:90vh;
    overflow-y:auto;
  }
  .modal-overlay.open .modal-box{ transform:translateY(0); }
  .close-modal{ position:absolute; top:20px; right:20px; background:none; border:none; font-size:20px; color:#999; cursor:pointer; }
  .artist-modal-header{ text-align:center; margin-bottom:20px; }
  .artist-modal-avatar{ width:80px; height:80px; border-radius:50%; margin:0 auto 15px; overflow:hidden; }
  .artist-modal-avatar img{ width:100%; height:100%; object-fit:cover; }
  .artist-modal-bio{ font-size:13px; line-height:1.6; color:#555; text-align:center; }

  @keyframes slideIn{
    from{ opacity:0; transform:translateX(20px); }
    to{ opacity:1; transform:translateX(0); }
  }

  /* ===== MOBILE (scroll overlays map + nav over map + chips one line) ===== */
  @media (max-width:900px){
    body{ overflow:auto; height:auto; }

    .layout{ display:block; height:auto; }

    /* map becomes background */
    #map{
      position:fixed;
      inset:0;
      width:100%;
      height:100vh;
      flex:none;
      z-index:0;
    }

    /* shop overlays the map and can scroll “over it” */
    .shop{
      position:relative;
      z-index:2;
      width:100%;
      height:auto;
      min-height:100vh;
      background:transparent;
      box-shadow:none;
    }

    /* sheet feel: starts lower so map shows 45vh (10% less than old 50vh) */
    .shop::before{
      content:"";
      display:block;
      height:45vh;
    }

    /* sections become normal flow on mobile (so scrolling works) */
    .app-section{
      position:relative;
      inset:auto;
      transform:none;
      transition:none;
      padding:22px;
      height:auto;
      overflow:visible;
      display:none;
      opacity:1;
      visibility:visible;
      pointer-events:auto;
      background:rgba(255,255,255,0.97);
      backdrop-filter:blur(10px);
      border-radius:24px 24px 0 0;
      box-shadow:0 -10px 30px rgba(0,0,0,0.18);
      border-top:1px solid rgba(255,255,255,0.6);
    }
    .app-section.active-section{ display:block; }

    #sect-gallery{ padding:0; background:transparent; border-radius:0; box-shadow:none; }
    #sect-gallery.active-section{
      background:rgba(255,255,255,0.97);
      border-radius:24px 24px 0 0;
      box-shadow:0 -10px 30px rgba(0,0,0,0.18);
    }

    .shop-head{
      padding:18px 16px;
      overflow-x:auto;
      scrollbar-width:none;
      display:block;
      border-bottom:1px solid rgba(0,0,0,0.06);
    }
    .shop-head::-webkit-scrollbar{ display:none; }

    /* product category nav in ONE LINE */
    .nav-group{
      flex-wrap:nowrap;
      overflow-x:auto;
      gap:10px;
      white-space:nowrap;
      padding-right:10px;
      scrollbar-width:none;
    }
    .nav-group::-webkit-scrollbar{ display:none; }
    .chip{
      font-size:13px;
      padding:10px 16px;
      background:#f5f5f5;
      border-radius:999px;
      color:#666;
      flex:0 0 auto;
    }
    .chip.active{ background:#111; color:#fff; box-shadow:0 4px 10px rgba(0,0,0,0.15); }

    .shop-body{ padding:18px 16px 50px; overflow:visible; }

    .grid{ grid-template-columns:repeat(2,1fr); gap:15px; }
    .card{ padding:15px; border-radius:22px; }
    .card-media{ height:120px; }

    .solo-media-container{ height:280px; }

    /* MOBILE SECTION NAV (over map, bottom, horizontal, same style) */
    .side-nav{
      display:flex;
      flex-direction:row;
      top:auto;
      bottom:14px;
      left:50%;
      right:auto;
      transform:translateX(-50%);
      border-radius:999px;
      overflow:hidden;
      box-shadow:0 12px 30px rgba(0,0,0,0.35);
    }
    .nav-item{
      padding:14px 18px;
      font-size:12px;
      border-bottom:none;
      border-right:1px solid rgba(255,255,255,0.10);
    }
    .nav-item:last-child{ border-right:none; }
    .nav-item:hover,
    .nav-item.active{ padding-right:18px; }

    .services-grid{ grid-template-columns:repeat(2,minmax(0,1fr)); gap:18px 14px; }
    .svc-title{ font-size:18px; }
  }
</style>
</head>

<body>
<div class="layout">
  <div id="map">
    <nav class="side-nav" id="sideNav">
      <div class="nav-item" id="navHome">Home</div>
      <div class="nav-item" id="navAbout">About Us</div>
      <div class="nav-item" id="navServices">Services</div>
      <div class="nav-item active" id="navGallery">Gallery</div>
      <div class="nav-item" id="navContact">Contacts</div>
    </nav>
  </div>

  <aside class="shop" id="shop">

    <!-- HOME -->
    <section id="sect-home" class="app-section">
      <div class="home-hero">
        <img
          class="home-hero-logo"
          src="https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693e9cd364bca27486a365c1_WhatsApp%20Image%202025-12-13%20at%2023.26.34_6e0cb159.jpg"
          alt="FNN Logo"
        />
      </div>
      <h1 class="sec-title">Welcome to FNN</h1>
      <p class="sec-sub">Discover a curated collection of original artworks, exhibitions, and contemporary art programs.</p>
      <button class="btn-hero" onclick="switchSection('sect-gallery')">Explore Collection</button>
    </section>

    <!-- ABOUT -->
    <section id="sect-about" class="app-section">
      <h1 class="sec-title">About FNN</h1>
      <p class="sec-sub">
        A modern art platform specializing in the presentation of original artworks by selected artists — built to honor both the artist and the artwork,
        and to connect creative expression with audiences and institutions across the region.
      </p>

      <img
        class="about-hero-img"
        src="https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693d582b580fad0c77f39d0e_Gemini_Generated_Image_ir55ypir55ypir55%20(1).png"
        alt="About"
      >

      <div class="about-block">
        <h3>Mission</h3>
        <p>
          FNN is a modern art platform specializing in the presentation of original artworks by selected artists. Our mission is to elevate art as a cultural value
          and creative identity by providing a professional environment that honors both the artist and the artwork, and connects creative expression with audiences
          and art institutions — with the ambition to become the Art Content Center (NDCC) for the art scene in the Kingdom of Saudi Arabia.
        </p>
      </div>

      <div class="about-grid">
        <div class="about-pill">
          <b>Curated Art Platforms</b>
          <span>Original works by selected local & international artists, centered on contemporary practices and emerging voices.</span>
        </div>
        <div class="about-pill">
          <b>Exhibitions & Programs</b>
          <span>Gallery presentations, pop-ups, collaborations, and thematic programs exploring identity, place, and modern culture.</span>
        </div>
        <div class="about-pill">
          <b>Art Content Center (NDCC)</b>
          <span>A central node for creation, curation, archiving, and distribution — bridging artists, collectors, institutions, and the public.</span>
        </div>
        <div class="about-pill">
          <b>Media & Cultural Impact</b>
          <span>Narrative building and audience engagement — making elevated art experiences accessible and culturally relevant.</span>
        </div>
      </div>
    </section>

    <!-- SERVICES -->
    <section id="sect-services" class="app-section">
      <h1 class="sec-title">Services</h1>
      <p class="sec-sub">A complete ecosystem for planning, producing, presenting, and supporting contemporary art experiences.</p>

      <div class="services-wrap">
        <div class="services-grid">
          <!-- 1 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M9 18h6" />
                <path d="M10 22h4" />
                <path d="M12 2a7 7 0 0 0-4 12c.6.5 1 1.3 1 2h6c0-.7.4-1.5 1-2a7 7 0 0 0-4-12Z"/>
              </svg>
            </div>
            <h3 class="svc-title">Creative Planning</h3>
            <p class="svc-desc">Concept development, curatorial direction, and creative strategy for exhibitions and content.</p>
          </div>

          <!-- 2 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 20h9" />
                <path d="M16.5 3.5a2.1 2.1 0 0 1 3 3L8 18l-4 1 1-4 11.5-11.5Z" />
              </svg>
            </div>
            <h3 class="svc-title">Original Design</h3>
            <p class="svc-desc">Original design systems and presentation formats for artists, institutions, and partners.</p>
          </div>

          <!-- 3 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 19V5" />
                <path d="M20 19V5" />
                <path d="M7 19V9" />
                <path d="M17 19V9" />
              </svg>
            </div>
            <h3 class="svc-title">Excellent Structure</h3>
            <p class="svc-desc">Program planning and operational structure for scalable art initiatives and platforms.</p>
          </div>

          <!-- 4 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 2v20" />
                <path d="M2 12h20" />
                <path d="M7 7l10 10" />
                <path d="M17 7 7 17" />
              </svg>
            </div>
            <h3 class="svc-title">Crafted with Ingenuity</h3>
            <p class="svc-desc">Thoughtful execution across materials, production, and presentation — with high standards.</p>
          </div>

          <!-- 5 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 7h16" />
                <path d="M6 7v14h12V7" />
                <path d="M9 7V4h6v3" />
              </svg>
            </div>
            <h3 class="svc-title">Professional Installation</h3>
            <p class="svc-desc">Coordination, logistics, and installation planning for exhibitions and spatial activations.</p>
          </div>

          <!-- 6 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 21h18" />
                <path d="M7 17l10-10" />
                <path d="M14 7h3v3" />
              </svg>
            </div>
            <h3 class="svc-title">Refurbishment & Restoration</h3>
            <p class="svc-desc">Support for maintenance, restoration pathways, and condition workflows for works and objects.</p>
          </div>

          <!-- 7 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 7h18" />
                <path d="M6 7l2 14h8l2-14" />
                <path d="M9 7V4h6v3" />
              </svg>
            </div>
            <h3 class="svc-title">Art Rental</h3>
            <p class="svc-desc">Short-term and program-based rental of works for institutions, spaces, and events.</p>
          </div>

          <!-- 8 -->
          <div class="svc-item">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 21s7-4.5 7-11a7 7 0 0 0-14 0c0 6.5 7 11 7 11Z"/>
                <path d="M12 10h.01" />
              </svg>
            </div>
            <h3 class="svc-title">Site Survey</h3>
            <p class="svc-desc">On-site inspection, reporting, and coordination to align the artwork with the space.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="sect-gallery" class="app-section active-section">
      <header class="shop-head">
        <nav class="nav-group" id="filters">
          <button class="chip active" data-filter="all" id="btnAll">ALL</button>
          <button class="chip" data-filter="cabinet">Cabinets</button>
          <button class="chip" data-filter="sideboard">Sideboards</button>
          <button class="chip" data-filter="decor">Decor</button>
        </nav>
      </header>

      <div class="shop-body">
        <div class="grid" id="grid"></div>

        <div class="solo-wrap" id="soloWrap">
          <div class="back-nav"><button class="btn-back" id="btnBack">← Back to Collection</button></div>

          <div class="solo-media-container" id="soloMedia">
            <!-- injected -->
          </div>

          <div class="solo-info-block">
            <div class="solo-desc">
              <strong id="soloTitle">PRODUCT</strong><br>
              Contemporary design meeting functionality.
              <div class="data-row">
                <div class="data-item"><span>Material</span><span id="spMat">--</span></div>
                <div class="data-item"><span>Dimensions</span><span id="spDim">--</span></div>
                <div class="data-item"><span>Location</span><span id="soloStore">--</span></div>
              </div>
            </div>

            <div class="artist-profile" id="artistBtn">
              <div class="avatar"><img id="artistImg" src="" alt="Designer"></div>
              <div class="artist-info"><h4 id="artistName">--</h4><p id="artistRole">--</p></div>
              <div class="artist-cta">View Bio →</div>
            </div>

            <div class="actions">
              <button class="btn btn-primary" id="btnContactProduct">Contact Us</button>
              <button class="btn btn-ghost" id="btnClose">Close</button>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="sect-contact" class="app-section">
      <h1 class="sec-title">Get in Touch</h1>
      <p class="sec-sub">Interested in a piece? Let us know.</p>

      <form id="ajaxForm" action="https://formsubmit.co/anaskaroti@gmail.com" method="POST">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_template" value="table">
        <div class="form-group"><input type="text" class="form-input" name="name" placeholder="Your Name" required></div>
        <div class="form-group"><input type="email" class="form-input" name="email" placeholder="Your Email" required></div>
        <div class="form-group"><input type="text" class="form-input" name="subject" placeholder="Subject" id="formSubject"></div>
        <div class="form-group"><textarea class="form-input" name="message" placeholder="Message..." rows="3"></textarea></div>
        <button type="submit" class="btn-submit" id="formSubmitBtn">Send Inquiry</button>
      </form>
      <div id="formSuccess" style="display:none; border-radius:12px; margin-top:15px; background:#f0f0f0; color:#333; padding:20px; text-align:center; font-size:14px;">
        Thank you! Your inquiry has been received.
      </div>
    </section>

  </aside>
</div>

<!-- ARTIST & CONTACT MODALS -->
<div class="modal-overlay" id="modalArtistOverlay">
  <div class="modal-box">
    <button class="close-modal" id="closeArtistModal">×</button>
    <div class="artist-modal-header">
      <div class="artist-modal-avatar"><img id="modalArtistImg" src="" alt=""></div>
      <h3 id="modalArtistName"></h3>
      <span style="font-size:12px; color:#999; text-transform:uppercase;" id="modalArtistRole"></span>
    </div>
    <p class="artist-modal-bio" id="modalArtistBio"></p>
  </div>
</div>

<div class="modal-overlay" id="modalContactOverlay">
  <div class="modal-box">
    <button class="close-modal" id="closeContactModal">×</button>
    <h3 class="form-title" style="font-size:18px; font-weight:900; margin:0 0 20px; text-align:center;">Inquire about this piece</h3>
    <form id="ajaxFormModal" action="https://formsubmit.co/anaskaroti@gmail.com" method="POST">
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_template" value="table">
      <div class="form-group"><input type="text" class="form-input" name="name" placeholder="Your Name" required></div>
      <div class="form-group"><input type="email" class="form-input" name="email" placeholder="Your Email" required></div>
      <div class="form-group"><input type="text" class="form-input" name="subject" placeholder="Subject" id="formSubjectModal"></div>
      <div class="form-group"><textarea class="form-input" name="message" placeholder="Message..." rows="3"></textarea></div>
      <button type="submit" class="btn-submit" id="formSubmitBtnModal" style="width:100%; background:#111; color:#fff; padding:14px; border-radius:12px; border:none; font-weight:800; cursor:pointer;">
        Send Inquiry
      </button>
    </form>
    <div id="formSuccessModal" style="display:none; border-radius:12px; margin-top:15px; background:#f0f0f0; color:#333; padding:20px; text-align:center; font-size:14px;">
      Thank you! Your inquiry has been received.
    </div>
  </div>
</div>

<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>

<script>
  /* ===== MAP CONFIG ===== */
  const MAPBOX_TOKEN = "pk.eyJ1IjoiYW5hc2thcm90aSIsImEiOiJjbWhqcHgwcmMwbWM0MmxwZ2V5Z2x5OTN0In0.bpOf-4BsljExZdYZUak_pw";
  const USER_STYLE = "mapbox://styles/anaskaroti/cmhuiic1f00ft01qucn91gk6e";

  mapboxgl.accessToken = MAPBOX_TOKEN;
  const isMobile = window.innerWidth < 900;
  const startZoom = isMobile ? 0 : 0.8;

  const map = new mapboxgl.Map({
    container:"map",
    style:USER_STYLE,
    center:[0,20],
    zoom:startZoom,
    pitch:0,
    projection:"globe"
  });

  map.on("style.load", () => {
    try{
      map.setFog({
        "color":"rgb(255,255,255)",
        "high-color":"rgb(200,200,200)",
        "space-color":"rgb(0,0,0)",
        "star-intensity":0.6
      });
    }catch(e){}

    const layers = map.getStyle().layers || [];
    let labelLayerId;
    for(const layer of layers){
      if(layer.type === "symbol" && layer.layout && layer.layout["text-field"]){
        labelLayerId = layer.id;
        break;
      }
    }

    if(!map.getLayer("3d-buildings-custom")){
      map.addLayer({
        "id":"3d-buildings-custom",
        "source":"composite",
        "source-layer":"building",
        "filter":["==","extrude","true"],
        "type":"fill-extrusion",
        "minzoom":15,
        "paint":{
          "fill-extrusion-color":"#aaa",
          "fill-extrusion-height":["get","height"],
          "fill-extrusion-base":["get","min_height"],
          "fill-extrusion-opacity":0.6
        }
      }, labelLayerId);
    }

    for(const layer of layers){
      if(layer.type === "symbol" && layer.layout && layer.layout["text-field"]){
        map.setLayoutProperty(layer.id,"text-size",
          ["interpolate",["linear"],["zoom"],0,6,10,8,22,10]
        );
      }
    }
  });

  /* ===== NAV LOGIC ===== */
  window.switchSection = function(id){
    document.querySelectorAll(".app-section").forEach(s => s.classList.remove("active-section"));
    const target = document.getElementById(id);
    if(target) target.classList.add("active-section");

    document.querySelectorAll(".nav-item").forEach(n => n.classList.remove("active"));
    const navIdMap = {
      "sect-home":"navHome",
      "sect-about":"navAbout",
      "sect-services":"navServices",
      "sect-gallery":"navGallery",
      "sect-contact":"navContact"
    };
    const navEl = document.getElementById(navIdMap[id]);
    if(navEl) navEl.classList.add("active");

    if(id === "sect-home"){
      map.flyTo({ center:[0,20], zoom:startZoom, pitch:0, bearing:0, duration:2000 });
    }
  };

  const safeAdd = (id, ev, handler) => {
    const el = document.getElementById(id);
    if(el) el.addEventListener(ev, handler);
  };

  safeAdd("navHome","click",() => switchSection("sect-home"));
  safeAdd("navAbout","click",() => switchSection("sect-about"));
  safeAdd("navServices","click",() => switchSection("sect-services"));
  safeAdd("navGallery","click",() => switchSection("sect-gallery"));
  safeAdd("navContact","click",() => switchSection("sect-contact"));

  /* ===== FORMS ===== */
  const wireAjaxForm = (formId, btnId, successId) => {
    const form = document.getElementById(formId);
    const btn = document.getElementById(btnId);
    const success = document.getElementById(successId);
    if(!form) return;

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      if(btn){ btn.textContent = "Sending..."; btn.style.opacity = "0.7"; }
      fetch(form.action, {
        method:"POST",
        body:new FormData(form),
        headers:{ "Accept":"application/json" }
      })
      .then(r => {
        if(r.ok){
          form.style.display = "none";
          if(success) success.style.display = "block";
        }else{
          alert("Oops! Problem submitting.");
          if(btn){ btn.textContent = "Try Again"; btn.style.opacity = "1"; }
        }
      })
      .catch(() => {
        alert("Oops! Problem submitting.");
        if(btn){ btn.textContent = "Try Again"; btn.style.opacity = "1"; }
      });
    });
  };

  wireAjaxForm("ajaxForm", "formSubmitBtn", "formSuccess");
  wireAjaxForm("ajaxFormModal", "formSubmitBtnModal", "formSuccessModal");

  /* ===== MAP ANIMATION ===== */
  let currentMarker = null;
  let rotationFrame = null;

  function gotoStore(store){
    if(!store) return;
    if(rotationFrame){ cancelAnimationFrame(rotationFrame); rotationFrame = null; }
    if(currentMarker) currentMarker.remove();

    const el = document.createElement("div");
    el.style.backgroundColor="#111";
    el.style.width="20px";
    el.style.height="20px";
    el.style.borderRadius="50%";
    el.style.border="2px solid white";
    currentMarker = new mapboxgl.Marker(el).setLngLat(store.coords).addTo(map);

    map.flyTo({
      center:store.coords,
      zoom:16.5,
      pitch:65,
      bearing:Math.random()*90,
      speed:0.3,
      curve:1.2,
      essential:true,
      duration:10000
    });

    map.once("moveend", () => {
      function rotate(){
        map.rotateTo((map.getBearing()+0.05)%360,{ duration:0 });
        rotationFrame = requestAnimationFrame(rotate);
      }
      rotate();
    });
  }

  /* ===== PRODUCT MEDIA (Images / 360 / Video / 3D) ===== */
  const PRODUCT_IMAGES = [
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9c47857d958372698_Gemini_Generated_Image_yiit8eyiit8eyiit.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9fd2fa99da51c575a_Gemini_Generated_Image_qrrx4iqrrx4iqrrx.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9978004d5fa2a3d3a_Gemini_Generated_Image_6hnali6hnali6hna.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9ff7c4713583ae7b5_Gemini_Generated_Image_im37uhim37uhim37.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca8c4a4dc0af86da352_Gemini_Generated_Image_rn5h5urn5h5urn5h.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca8c641d77b3de17010_Gemini_Generated_Image_mhci8mmhci8mmhci.png"
  ];

  // 360 video UPDATED (requested)
  const RAW_360_URL = "https://raw.githubusercontent.com/lwiise/3d-models/main/Product_Video_Generation_With_Rotation.mp4";

  // “Video” tab url (keep your earlier one)
  const RAW_VIDEO_URL = "https://raw.githubusercontent.com/lwiise/3d-models/main/Artistic_Video_Generation_Request.mp4";

  function buildTabs(active){
    return `
      <div class="media-tabs" id="mediaTabs">
        <button class="media-tab ${active==='images'?'active':''}" data-mode="images">IMAGES</button>
        <button class="media-tab ${active==='360'?'active':''}" data-mode="360">360</button>
        <button class="media-tab ${active==='video'?'active':''}" data-mode="video">VIDEO</button>
        <button class="media-tab ${active==='3d'?'active':''}" data-mode="3d">3D</button>
      </div>
    `;
  }

  let currentProduct = null;
  let imgIndex = 0;

  function renderImagesStage(){
    const url = PRODUCT_IMAGES[imgIndex] || PRODUCT_IMAGES[0];
    return `
      ${buildTabs('images')}
      <div class="stage"><img src="${url}" alt="Product image"></div>
      <button class="img-arrow left" id="imgPrev" aria-label="Previous">‹</button>
      <button class="img-arrow right" id="imgNext" aria-label="Next">›</button>
    `;
  }

  function render360Stage(){
    return `
      ${buildTabs('360')}
      <div class="stage">
        <video id="v360" playsinline muted loop preload="metadata" style="width:100%;height:100%;object-fit:cover;"></video>
      </div>
      <div class="ctrl-bar">
        <button class="ctrl-btn" id="ctrlPlay" aria-label="Play/Pause">❚❚</button>
        <input class="ctrl-range" id="ctrlSeek" type="range" min="0" max="1000" value="0" step="1" />
      </div>
    `;
  }

  function renderVideoStage(){
    return `
      ${buildTabs('video')}
      <div class="stage">
        <video src="${RAW_VIDEO_URL}" playsinline controls style="width:100%;height:100%;object-fit:cover;"></video>
      </div>
    `;
  }

  function render3dStage(){
    const p = currentProduct || {};
    const safeUrl = (p.model || "")
      .replace(/\(/g, "%28")
      .replace(/\)/g, "%29")
      .replace(/ /g, "%20");

    return `
      ${buildTabs('3d')}
      <div class="stage">
        <model-viewer
          id="viewer3d"
          src="${safeUrl}"
          camera-controls
          auto-rotate
          shadow-intensity="1"
          style="background:transparent;width:100%;height:100%;"
          camera-orbit="45deg 75deg 3m"
          environment-image="neutral"
          alt="3D">
        </model-viewer>
      </div>
    `;
  }

  function setMediaMode(mode){
    const soloMedia = document.getElementById("soloMedia");
    if(!soloMedia) return;

    if(mode === "images") soloMedia.innerHTML = renderImagesStage();
    if(mode === "360") soloMedia.innerHTML = render360Stage();
    if(mode === "video") soloMedia.innerHTML = renderVideoStage();
    if(mode === "3d") soloMedia.innerHTML = render3dStage();

    const tabs = soloMedia.querySelector("#mediaTabs");
    if(tabs){
      tabs.addEventListener("click", (e) => {
        const btn = e.target.closest(".media-tab");
        if(!btn) return;
        setMediaMode(btn.dataset.mode);
      });
    }

    if(mode === "images"){
      const prev = document.getElementById("imgPrev");
      const next = document.getElementById("imgNext");
      if(prev) prev.onclick = () => { imgIndex = (imgIndex - 1 + PRODUCT_IMAGES.length) % PRODUCT_IMAGES.length; setMediaMode("images"); };
      if(next) next.onclick = () => { imgIndex = (imgIndex + 1) % PRODUCT_IMAGES.length; setMediaMode("images"); };
    }

    if(mode === "360"){
      const v = document.getElementById("v360");
      const playBtn = document.getElementById("ctrlPlay");
      const seek = document.getElementById("ctrlSeek");

      if(v){
        v.src = RAW_360_URL;
        v.addEventListener("loadedmetadata", () => {
          v.currentTime = 0;
          v.play().catch(()=>{});
        });

        const syncSeek = () => {
          if(!v.duration || !seek) return;
          const val = Math.round((v.currentTime / v.duration) * 1000);
          seek.value = String(isFinite(val) ? val : 0);
        };

        v.addEventListener("timeupdate", syncSeek);

        if(playBtn){
          const updateIcon = () => { playBtn.textContent = v.paused ? "▶" : "❚❚"; };
          updateIcon();
          playBtn.onclick = () => {
            if(v.paused) v.play().catch(()=>{});
            else v.pause();
            updateIcon();
          };
          v.addEventListener("play", updateIcon);
          v.addEventListener("pause", updateIcon);
        }

        if(seek){
          seek.oninput = () => {
            if(!v.duration) return;
            const t = (Number(seek.value) / 1000) * v.duration;
            v.currentTime = t;
          };
        }
      }
    }

    if(mode === "3d"){
      const viewer = document.getElementById("viewer3d");
      if(viewer){
        viewer.addEventListener("error", () => {
          // fallback: show first image
          setMediaMode("images");
        });
      }
    }
  }

  /* ===== DATA ===== */
  const PRODUCTS = [
    { id:"item-1", name:"Arch Cabinet", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a23d0fd8b7e2bc457_Screenshot_2025-11-23_141726-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(5).glb", specs:{ mat:"Velvet & Wood", dim:"120x60x90" }, store:{ name:"Milan Design District", coords:[9.1900,45.4642] }, artist:{ name:"Alessandro Rossi", role:"Art Director, Milano", img:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=100&q=80", bio:"Alessandro combines classical Italian joinery with bold, modern geometric forms." } },
    { id:"item-2", name:"Geometric Side", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a7e9f217180e18c6d_Screenshot_2025-11-23_142545-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20%289%29.glb", specs:{ mat:"Lacquered Wood", dim:"180x50x200" }, store:{ name:"Paris Le Marais", coords:[2.3522,48.8566] }, artist:{ name:"Claire Dubois", role:"Sculptor, Paris", img:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=100&q=80", bio:"Claire challenges the perception of stability with her organic, tree-like structures." } },
    { id:"item-3", name:"Art Deco Tall", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a3f4cd0cdf6848da0_Screenshot_2025-11-23_142423-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(7).glb", specs:{ mat:"Marble & Brass", dim:"220x80x95" }, store:{ name:"New York SoHo", coords:[-74.006,40.7128] }, artist:{ name:"Marcus Thorne", role:"Industrial Designer, NY", img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=100&q=80", bio:"Marcus revives 1920s Art Deco aesthetics for the modern Manhattan loft." } },
    { id:"item-4", name:"Striped Console", category:"decor", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a8659147dcb3f38ed_Screenshot_2025-11-23_142604-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1763910785694_base%20(4).glb", specs:{ mat:"Resin & Paint", dim:"100x60x140" }, store:{ name:"Tokyo Harajuku", coords:[139.7034,35.6719] }, artist:{ name:"Kenji Sato", role:"Pop Artist, Tokyo", img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=100&q=80", bio:"Kenji blurs the lines between collectible toys and functional high-end furniture." } }
  ];

  const grid = document.getElementById("grid");

  function render(list){
    if(!grid) return;
    grid.innerHTML = "";
    list.forEach(p => {
      const el = document.createElement("article");
      el.className = "card";
      el.innerHTML = `
        <div class="card-media"><img src="${p.img}" alt="${p.name}"/></div>
        <div class="card-name">${p.name}</div>
        <div class="card-sub">Edition 2024</div>
      `;
      el.addEventListener("click", () => openSolo(p));
      grid.appendChild(el);
    });
  }

  const filtersEl = document.getElementById("filters");
  if(filtersEl){
    filtersEl.addEventListener("click", e => {
      const btn = e.target.closest(".chip");
      if(!btn) return;
      document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
      btn.classList.add("active");
      const f = btn.dataset.filter;
      render(f === "all" ? PRODUCTS : PRODUCTS.filter(p => p.category === f));
    });
  }

  function openSolo(p){
    currentProduct = p;
    imgIndex = 0;

    document.getElementById("shop").classList.add("solo");
    document.getElementById("sect-gallery").classList.add("solo");

    document.getElementById("soloTitle").textContent = p.name.toUpperCase();
    document.getElementById("soloStore").textContent = p.store.name;
    document.getElementById("spMat").textContent = p.specs.mat;
    document.getElementById("spDim").textContent = p.specs.dim;

    document.getElementById("artistName").textContent = p.artist.name;
    document.getElementById("artistRole").textContent = p.artist.role;
    document.getElementById("artistImg").src = p.artist.img;

    document.getElementById("modalArtistName").textContent = p.artist.name;
    document.getElementById("modalArtistRole").textContent = p.artist.role;
    document.getElementById("modalArtistImg").src = p.artist.img;
    document.getElementById("modalArtistBio").textContent = p.artist.bio;

    const fs = document.getElementById("formSubject");
    if(fs) fs.value = "Inquiry: " + p.name;
    const fsM = document.getElementById("formSubjectModal");
    if(fsM) fsM.value = "Inquiry: " + p.name;

    const sideNav = document.querySelector(".side-nav");
    if(sideNav) sideNav.classList.add("focused");

    setMediaMode("images");   // default
    gotoStore(p.store);
  }

  function closeSolo(){
    const shopEl = document.getElementById("shop");
    const galleryEl = document.getElementById("sect-gallery");
    if(shopEl) shopEl.classList.remove("solo");
    if(galleryEl) galleryEl.classList.remove("solo");

    const sideNav = document.querySelector(".side-nav");
    if(sideNav) sideNav.classList.remove("focused");

    if(rotationFrame){ cancelAnimationFrame(rotationFrame); rotationFrame = null; }

    const isMobileReset = window.innerWidth < 900;
    map.flyTo({ center:[0,20], zoom:isMobileReset ? 0 : 0.8, pitch:0, bearing:0, duration:2500 });
  }

  safeAdd("btnBack","click",closeSolo);
  safeAdd("btnClose","click",closeSolo);
  safeAdd("btnContactProduct","click",() => switchSection("sect-contact"));

  const modalArtist = document.getElementById("modalArtistOverlay");
  const modalContact = document.getElementById("modalContactOverlay");

  const artistBtnEl = document.getElementById("artistBtn");
  if(artistBtnEl) artistBtnEl.addEventListener("click", () => {
    if(modalArtist) modalArtist.classList.add("open");
  });

  safeAdd("closeArtistModal","click",() => { if(modalArtist) modalArtist.classList.remove("open"); });
  safeAdd("closeContactModal","click",() => { if(modalContact) modalContact.classList.remove("open"); });

  window.addEventListener("click", (e) => {
    if(e.target === modalArtist && modalArtist) modalArtist.classList.remove("open");
    if(e.target === modalContact && modalContact) modalContact.classList.remove("open");
  });

  /* init gallery */
  (function initGalleryOnLoad(){
    function initGallery(){
      try{
        document.querySelectorAll(".nav-item").forEach(n => n.classList.remove("active"));
        const navGallery = document.getElementById("navGallery");
        if(navGallery) navGallery.classList.add("active");

        document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
        const btnAll = document.getElementById("btnAll") || document.querySelector('.chip[data-filter="all"]');
        if(btnAll) btnAll.classList.add("active");

        render(PRODUCTS);
      }catch(err){
        console.error(err);
      }
    }

    if(document.readyState === "complete" || document.readyState === "interactive"){
      setTimeout(initGallery, 20);
    }else{
      document.addEventListener("DOMContentLoaded", () => setTimeout(initGallery, 20));
    }
  })();
</script>
</body>
</html>
