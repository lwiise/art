<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Finna Art — Gallery</title>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet" />
<style>
  :root{
    --bg:#fff;
    --text-main:#222;
    --accent:#333;
    --card-radius:32px;
    --btn-radius:30px;
  }

  *,*::before,*::after{ box-sizing:border-box; -webkit-font-smoothing:antialiased; }
  body{
    margin:0; height:100vh; width:100vw;
    background:var(--bg);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
    color:var(--text-main);
    overflow:hidden; /* desktop */
  }

  /* ===== LAYOUT ===== */
  .layout{ display:flex; height:100%; width:100%; overflow:hidden; }

  /* LEFT MAP: 31% */
  #map{
    flex:0 0 31vw;
    height:100vh;
    background:#000;
    position:relative;
    overflow:hidden;
  }

  .mapboxgl-canvas{
    outline:none;
    filter:grayscale(100%) contrast(1.2) brightness(0.9);
  }

  /* ===== DESKTOP SIDE NAV ===== */
  .side-nav{
    position:absolute; top:50%; right:0; transform:translateY(-50%);
    display:flex; flex-direction:column; z-index:20;
    background:rgba(0,0,0,0.55); /* darker */
    backdrop-filter:blur(15px); -webkit-backdrop-filter:blur(15px);
    border-radius:20px 0 0 20px;
    border-left:1px solid rgba(255,255,255,0.12);
    border-top:1px solid rgba(255,255,255,0.12);
    border-bottom:1px solid rgba(255,255,255,0.12);
    box-shadow:-10px 0 30px rgba(0,0,0,0.35);
  }
  .side-nav.focused{ background:rgba(0,0,0,0.72); }

  .nav-item{
    padding:26px 34px;
    color:rgba(255,255,255,0.86);
    font-weight:700;
    font-size:14px;
    text-transform:uppercase;
    letter-spacing:0.06em;
    border-bottom:1px solid rgba(255,255,255,0.12);
    transition:all .25s ease;
    cursor:pointer;
    text-align:center;
    text-shadow:0 2px 10px rgba(0,0,0,.55);
    user-select:none;
  }
  .nav-item:last-child{ border-bottom:none; }
  .nav-item:hover,
  .nav-item.active{
    background:rgba(255,255,255,0.14);
    color:#fff;
    padding-right:44px;
  }

  /* ===== MOBILE HORIZONTAL NAV (over map bottom) ===== */
  .mobile-nav{
    position:absolute;
    left:12px; right:12px;
    bottom:12px;
    z-index:25;
    display:none;
    gap:10px;
    padding:10px 10px;
    background:rgba(0,0,0,0.55);
    backdrop-filter:blur(15px); -webkit-backdrop-filter:blur(15px);
    border:1px solid rgba(255,255,255,0.12);
    border-radius:18px;
    box-shadow:0 12px 30px rgba(0,0,0,0.35);
    overflow-x:auto;
    -webkit-overflow-scrolling:touch;
    scrollbar-width:none;
  }
  .mobile-nav::-webkit-scrollbar{ display:none; }
  .mnav-item{
    flex:0 0 auto;
    padding:12px 16px;
    border-radius:14px;
    color:rgba(255,255,255,0.86);
    font-weight:800;
    font-size:12px;
    text-transform:uppercase;
    letter-spacing:0.06em;
    cursor:pointer;
    user-select:none;
    white-space:nowrap;
    border:1px solid rgba(255,255,255,0.08);
    background:rgba(255,255,255,0.06);
  }
  .mnav-item.active{
    background:rgba(255,255,255,0.16);
    color:#fff;
  }

  /* ===== RIGHT SHOP: 69% ===== */
  .shop{
    flex:0 0 69vw;
    display:flex; flex-direction:column;
    height:100vh;
    background:#fff;
    position:relative;
    z-index:2;
    box-shadow:-10px 0 40px rgba(0,0,0,0.05);
    overflow:hidden;
  }

  /* sections architecture (desktop: absolute) */
  .app-section{
    position:absolute; inset:0;
    display:flex; flex-direction:column;
    background:#fff;
    opacity:0; visibility:hidden; pointer-events:none;
    transform:translateY(18px);
    transition:opacity .35s ease, transform .35s ease;
    z-index:1;
    padding:40px;
    overflow:hidden; /* IMPORTANT: avoid double-scroll bugs */
  }
  .app-section.active-section{
    opacity:1; visibility:visible; pointer-events:auto;
    transform:translateY(0);
    z-index:10;
  }

  /* ===== HOME ===== */
  .home-hero{
    width:100%;
    height:420px;
    border-radius:28px;
    background:#f3f3f3;
    position:relative;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 18px 40px rgba(0,0,0,0.06);
  }
  .home-hero .home-logo{
    width:100%;
    height:100%;
    object-fit:contain;
    padding:36px; /* gives that “big logo” feel without cropping */
    filter:drop-shadow(0 12px 25px rgba(0,0,0,0.12));
  }

  h1.sec-title{ font-size:32px; font-weight:900; margin:26px 0 10px; letter-spacing:-0.02em; color:#111; }
  p.sec-sub{ font-size:16px; color:#666; line-height:1.7; max-width:720px; margin:0 0 24px; }

  .btn-hero{
    display:inline-block;
    width:auto !important;
    padding:14px 36px;
    background:#111;
    color:#fff;
    border:none;
    border-radius:50px;
    font-size:14px;
    font-weight:800;
    cursor:pointer;
    margin-top:10px;
    box-shadow:0 10px 24px rgba(0,0,0,0.16);
    align-self:flex-start;
    transition:transform .15s ease, box-shadow .15s ease;
  }
  .btn-hero:hover{ transform:translateY(-2px); box-shadow:0 14px 30px rgba(0,0,0,0.2); background:#000; }

  /* ===== ABOUT ===== */
  .about-media{
    width:100%;
    border-radius:18px;
    margin-top:18px;
    overflow:hidden;
    border:1px solid #eee;
  }
  .about-media img{ width:100%; display:block; height:auto; }
  .about-split{
    display:grid;
    grid-template-columns:1.1fr 0.9fr;
    gap:24px;
    margin-top:18px;
    align-items:start;
  }
  .about-card{
    border:1px solid #eee;
    border-radius:20px;
    padding:20px;
    background:#fafafa;
  }
  .about-kicker{
    font-size:12px;
    font-weight:900;
    letter-spacing:0.12em;
    color:#999;
    text-transform:uppercase;
    margin:0 0 10px;
  }
  .about-quote{
    font-size:15px;
    line-height:1.8;
    color:#444;
    margin:0;
  }
  .about-pill-row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:14px; }
  .about-pill{
    font-size:12px;
    font-weight:800;
    padding:10px 12px;
    border-radius:999px;
    border:1px solid #eee;
    background:#fff;
    color:#444;
    white-space:nowrap;
  }

  /* ===== SERVICES (match your screenshot layout) ===== */
  .services-wrap{
    width:100%;
    border-radius:28px;
    border:1px solid #efefef;
    background:
      repeating-linear-gradient(135deg, rgba(0,0,0,0.035) 0px, rgba(0,0,0,0.035) 2px, rgba(255,255,255,0) 2px, rgba(255,255,255,0) 10px),
      #f6f6f6;
    padding:34px 24px;
    overflow:hidden;
  }
  .services-grid{
    display:grid;
    grid-template-columns:repeat(4, minmax(0,1fr));
    gap:22px 24px;
  }
  .svc{
    text-align:center;
    padding:18px 14px;
  }
  .svc-ico{
    width:58px; height:58px;
    margin:0 auto 14px;
    display:grid; place-items:center;
    color:#7c7c7c;
  }
  .svc-ico svg{ width:44px; height:44px; }
  .svc-title{
    font-size:22px;
    font-weight:500;
    color:#222;
    margin:0 0 10px;
  }
  .svc-desc{
    margin:0 auto;
    max-width:260px;
    font-size:14px;
    line-height:1.65;
    color:#777;
  }

  /* ===== GALLERY ===== */
  #sect-gallery{ padding:0; }

  .shop-head{
    flex:0 0 auto;
    position:sticky; top:0;
    background:rgba(255,255,255,0.96);
    backdrop-filter:blur(10px);
    z-index:10;
    padding:22px 26px;
    display:flex; align-items:center; justify-content:space-between;
    border-bottom:1px solid #f0f0f0;
  }

  .nav-group{
    display:flex;
    gap:10px;
    align-items:center;
    flex-wrap:nowrap;            /* one line */
    overflow-x:auto;             /* allow scroll if needed */
    -webkit-overflow-scrolling:touch;
    scrollbar-width:none;
  }
  .nav-group::-webkit-scrollbar{ display:none; }

  .chip{
    border:none;
    background:transparent;
    font-size:14px;
    color:#999;
    cursor:pointer;
    padding:8px 12px;
    transition:all .2s;
    font-weight:600;
    white-space:nowrap;
    border-radius:999px;
  }
  .chip:hover{ color:#333; }
  .chip.active{
    background:var(--accent);
    color:#fff;
    padding:8px 22px;
    border-radius:var(--btn-radius);
  }

  .shop-body{
    flex:1 1 auto;
    min-height:0;
    overflow-y:auto;             /* single scroll area */
    padding:18px 26px 64px;
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));
    gap:26px;
    width:100%;
  }

  .card{
    background:#fff;
    border:1px solid #f3f3f3;
    border-radius:28px;
    padding:22px 18px;
    cursor:pointer;
    transition:transform .2s ease, box-shadow .2s ease;
    display:flex; flex-direction:column; align-items:center; text-align:center;
  }
  .card:hover{ transform:translateY(-5px); box-shadow:0 18px 45px rgba(0,0,0,0.06); }
  .card-media{
    width:100%;
    height:170px;
    display:flex; align-items:center; justify-content:center;
    margin-bottom:16px;
  }
  .card-media img{
    max-width:100%;
    max-height:100%;
    object-fit:contain;
    filter:drop-shadow(0 10px 15px rgba(0,0,0,0.1));
  }
  .card-name{ font-size:13px; font-weight:900; letter-spacing:0.10em; color:#b0b0b0; text-transform:uppercase; margin-bottom:6px; }
  .card-sub{ font-size:10px; color:#c9c9c9; text-transform:uppercase; letter-spacing:0.06em; }

  /* ===== SOLO PRODUCT VIEW ===== */
  .solo-wrap{ display:none; }
  #sect-gallery.solo .grid{ display:none; }
  #sect-gallery.solo .solo-wrap{ display:block; }

  .back-nav{ margin-bottom:16px; }
  .btn-back{
    background:none; border:none; padding:0;
    color:#999; font-size:13px; font-weight:700;
    cursor:pointer; display:flex; align-items:center; gap:6px;
  }

  .solo-media-container{
    width:100%;
    height:420px;
    background:#fff;
    border-radius:28px;
    border:1px solid #f2f2f2;
    display:flex;
    align-items:center;
    justify-content:center;
    margin-bottom:18px;
    position:relative;
    overflow:visible; /* so tabs can sit "out of frame" */
  }

  /* product media tabs (out of frame, top-right) */
  .media-tabs{
    position:absolute;
    top:-18px;
    right:18px;
    display:flex;
    gap:10px;
    flex-wrap:nowrap;            /* one line */
    z-index:30;
  }
  .mtab{
    border:none;
    cursor:pointer;
    padding:8px 14px;
    font-size:12px;
    font-weight:900;
    text-transform:uppercase;
    letter-spacing:0.06em;
    border-radius:999px;
    background:rgba(0,0,0,0.14);
    color:#111;
    backdrop-filter:blur(10px);
    box-shadow:0 10px 22px rgba(0,0,0,0.08);
    white-space:nowrap;
    transition:transform .15s ease, background .15s ease;
  }
  .mtab:hover{ transform:translateY(-1px); background:rgba(0,0,0,0.18); }
  .mtab.active{ background:#111; color:#fff; }

  .solo-media-inner{
    width:100%;
    height:100%;
    border-radius:28px;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    background:#fff;
  }
  .solo-media-inner img{ max-width:100%; max-height:100%; object-fit:contain; }
  model-viewer{ width:100%; height:100%; }

  /* image carousel */
  .img-stage{ width:100%; height:100%; display:flex; align-items:center; justify-content:center; position:relative; }
  .img-stage img{ width:100%; height:100%; object-fit:contain; }
  .img-arrow{
    position:absolute; top:50%; transform:translateY(-50%);
    width:40px; height:40px; border-radius:999px;
    border:none; cursor:pointer;
    background:rgba(0,0,0,0.35);
    color:#fff;
    display:grid; place-items:center;
    backdrop-filter:blur(8px);
  }
  .img-arrow.left{ left:14px; }
  .img-arrow.right{ right:14px; }
  .img-dots{
    position:absolute; bottom:14px; left:50%; transform:translateX(-50%);
    display:flex; gap:8px;
    padding:8px 10px;
    border-radius:999px;
    background:rgba(0,0,0,0.22);
    backdrop-filter:blur(8px);
  }
  .dot{
    width:8px; height:8px; border-radius:999px;
    background:rgba(255,255,255,0.5);
  }
  .dot.active{ background:#fff; }

  /* 360 custom controller (like your screenshot) */
  .p360-wrap{ width:100%; height:100%; position:relative; background:#111; border-radius:28px; overflow:hidden; }
  .p360-wrap video{ width:100%; height:100%; object-fit:cover; display:block; }
  .p360-controls{
    position:absolute;
    left:24px; right:24px;
    bottom:20px;
    display:flex;
    align-items:center;
    gap:14px;
    padding:12px 14px;
    border-radius:999px;
    background:rgba(0,0,0,0.45);
    backdrop-filter:blur(10px);
  }
  .p360-btn{
    width:42px; height:34px;
    border:none; cursor:pointer;
    border-radius:12px;
    background:rgba(255,255,255,0.08);
    color:#fff;
    display:grid; place-items:center;
  }
  .p360-range{
    flex:1;
    -webkit-appearance:none;
    appearance:none;
    height:10px;
    border-radius:999px;
    background:rgba(255,255,255,0.22);
    outline:none;
    cursor:pointer;
  }
  .p360-range::-webkit-slider-thumb{
    -webkit-appearance:none;
    appearance:none;
    width:56px; height:18px;
    border-radius:999px;
    background:rgba(255,255,255,0.9);
    box-shadow:0 8px 20px rgba(0,0,0,0.35);
  }
  .p360-range::-moz-range-thumb{
    width:56px; height:18px;
    border-radius:999px;
    border:none;
    background:rgba(255,255,255,0.9);
  }

  .solo-info-block{ padding:0 6px; }
  .solo-desc{
    text-align:left;
    color:#666;
    font-size:14px;
    line-height:1.7;
    border-top:1px solid #eee;
    padding-top:22px;
    margin-bottom:26px;
  }
  .data-row{ display:flex; gap:30px; margin-top:14px; flex-wrap:wrap; }
  .data-item span:first-child{
    display:block; font-size:10px; color:#999;
    text-transform:uppercase; font-weight:900; letter-spacing:0.08em; margin-bottom:4px;
  }
  .data-item span:last-child{ font-size:15px; font-weight:800; color:#222; }

  .artist-profile{
    display:flex; align-items:center; gap:14px;
    margin-top:24px;
    padding:16px;
    background:#fafafa;
    border-radius:20px;
    cursor:pointer;
    transition:all .2s;
    border:1px solid transparent;
  }
  .artist-profile:hover{ background:#fff; border-color:#eee; box-shadow:0 6px 18px rgba(0,0,0,0.05); transform:translateY(-2px); }
  .avatar{ width:44px; height:44px; border-radius:50%; background:#eee; overflow:hidden; }
  .avatar img{ width:100%; height:100%; object-fit:cover; }
  .artist-info{ flex:1; }
  .artist-info h4{ margin:0; font-size:13px; color:#222; }
  .artist-info p{ margin:2px 0 0; font-size:11px; color:#888; }
  .artist-cta{ font-size:11px; font-weight:900; color:#333; text-transform:uppercase; letter-spacing:0.06em; }

  .actions{ display:flex; gap:12px; margin-top:24px; }
  .btn{ padding:14px 18px; border-radius:14px; border:none; font-size:13px; font-weight:800; cursor:pointer; }
  .btn:active{ transform:scale(.98); }
  .btn-primary{ background:#111; color:#fff; flex:1; }
  .btn-ghost{ background:#f0f0f0; color:#666; }

  /* ===== FORMS ===== */
  .form-title{ font-size:18px; font-weight:900; margin:0 0 16px; text-align:center; }
  .form-group{ margin-bottom:12px; }
  .form-input{
    display:block;
    width:100%;
    padding:14px;
    border:1px solid #eee;
    border-radius:12px;
    background:#fafafa;
    font-size:14px;
    color:#111;
    margin:0;
  }
  .form-input:focus{ outline:none; border-color:#111; background:#fff; }
  .btn-submit{
    width:100%;
    background:#111;
    color:#fff;
    padding:14px;
    border-radius:12px;
    border:none;
    font-weight:900;
    cursor:pointer;
    text-align:center;
  }
  #formSuccess, #formSuccessModal{
    display:none;
    border-radius:12px;
    margin-top:14px;
    background-color:#f0f0f0;
    color:#333;
    padding:18px;
    text-align:center;
    font-size:14px;
  }

  /* ===== MODALS ===== */
  .modal-overlay{
    position:fixed; top:0; left:0; width:100%; height:100%;
    background:rgba(0,0,0,0.4);
    backdrop-filter:blur(4px);
    z-index:9999;
    display:none;
    align-items:center;
    justify-content:center;
    opacity:0;
    transition:opacity .25s ease;
  }
  .modal-overlay.open{ display:flex; opacity:1; }
  .modal-box{
    background:#fff;
    width:90%;
    max-width:420px;
    padding:28px;
    border-radius:24px;
    box-shadow:0 20px 40px rgba(0,0,0,0.2);
    transform:translateY(18px);
    transition:transform .25s cubic-bezier(0.2,0.8,0.2,1);
    position:relative;
    max-height:90vh;
    overflow:auto;
  }
  .modal-overlay.open .modal-box{ transform:translateY(0); }
  .close-modal{
    position:absolute; top:16px; right:16px;
    background:none; border:none;
    font-size:22px; color:#999; cursor:pointer;
  }
  .artist-modal-header{ text-align:center; margin-bottom:16px; }
  .artist-modal-avatar{ width:80px; height:80px; border-radius:50%; margin:0 auto 12px; overflow:hidden; }
  .artist-modal-avatar img{ width:100%; height:100%; object-fit:cover; }
  .artist-modal-bio{ font-size:13px; line-height:1.7; color:#555; text-align:center; }

  /* ===== MOBILE RESPONSIVENESS ===== */
  @media (max-width: 900px){
    body{ overflow-y:auto; }      /* allow page scroll on mobile */

    .layout{ flex-direction:column; height:auto; min-height:100vh; }

    /* map fixed behind, smaller by ~10% */
    #map{
      position:fixed;
      top:0; left:0;
      width:100%;
      height:45vh;               /* was 50vh, now less */
      flex:none;
      z-index:0;
    }

    .side-nav{ display:none; }
    .mobile-nav{ display:flex; }

    /* shop overlays map and scrolls over it */
    .shop{
      width:100%;
      flex:none;
      height:auto;
      min-height:100vh;
      margin-top:40vh;           /* content starts on map, then scrolls over it */
      border-radius:24px 24px 0 0;
      box-shadow:0 -10px 30px rgba(0,0,0,0.12);
      position:relative;
      z-index:5;
      overflow:visible;
    }

    /* mobile sections should be in flow */
    .app-section{
      position:relative;
      inset:auto;
      height:auto;
      transform:none;
      opacity:1;
      visibility:visible;
      pointer-events:auto;
      display:none;              /* only active shows */
      padding:22px;
      overflow:visible;
    }
    .app-section.active-section{ display:flex; }

    /* gallery */
    .shop-head{
      padding:18px 18px;
      position:sticky;
      top:0;
      border-radius:24px 24px 0 0;
    }
    .nav-group{
      gap:10px;
      flex-wrap:nowrap;          /* one line */
      overflow-x:auto;
    }
    .chip{
      font-size:13px;
      padding:10px 16px;
      background:#f5f5f5;
      border-radius:999px;
      color:#666;
    }
    .chip.active{
      background:#111;
      color:#fff;
      box-shadow:0 6px 14px rgba(0,0,0,0.14);
    }

    .shop-body{ padding:16px 18px 70px; overflow:visible; } /* let page scroll */
    .grid{ grid-template-columns:repeat(2, minmax(0,1fr)); gap:14px; }
    .card{ padding:14px; border-radius:22px; }
    .card-media{ height:110px; }

    .solo-media-container{ height:320px; }
    .media-tabs{ top:-14px; right:12px; gap:8px; }
    .mtab{ padding:8px 12px; font-size:11px; }
    .services-grid{ grid-template-columns:repeat(2, minmax(0,1fr)); }
    .about-split{ grid-template-columns:1fr; }
  }
</style>
</head>

<body>
<div class="layout">
  <div id="map">
    <!-- Desktop Nav -->
    <nav class="side-nav" id="sideNav">
      <div class="nav-item" id="navHome">Home</div>
      <div class="nav-item" id="navAbout">About Us</div>
      <div class="nav-item" id="navServices">Services</div>
      <div class="nav-item active" id="navGallery">Gallery</div>
      <div class="nav-item" id="navContact">Contacts</div>
    </nav>

    <!-- Mobile Nav -->
    <nav class="mobile-nav" id="mobileNav">
      <div class="mnav-item" data-target="sect-home" id="mnavHome">Home</div>
      <div class="mnav-item" data-target="sect-about" id="mnavAbout">About</div>
      <div class="mnav-item" data-target="sect-services" id="mnavServices">Services</div>
      <div class="mnav-item active" data-target="sect-gallery" id="mnavGallery">Gallery</div>
      <div class="mnav-item" data-target="sect-contact" id="mnavContact">Contacts</div>
    </nav>
  </div>

  <aside class="shop" id="shop">
    <!-- HOME -->
    <section id="sect-home" class="app-section">
      <div class="home-hero">
        <img class="home-logo" alt="FNN ART"
          src="https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693e9cd364bca27486a365c1_WhatsApp%20Image%202025-12-13%20at%2023.26.34_6e0cb159.jpg">
      </div>
      <h1 class="sec-title">Welcome to FNN</h1>
      <p class="sec-sub">A modern platform built to present original artworks and elevate art as a cultural value.</p>
      <button class="btn-hero" onclick="switchSection('sect-gallery')">Explore Collection</button>
    </section>

    <!-- ABOUT -->
    <section id="sect-about" class="app-section">
      <h1 class="sec-title">About FNN</h1>
      <p class="sec-sub">
        FNN is a modern art platform specializing in the presentation of original artworks by selected artists.
        Our mission is to elevate art as a cultural value and creative identity—honoring both the artist and the artwork—
        while connecting creative expression with audiences and institutions, with the ambition to become the Art Content Center (NDCC)
        for the art scene in the Kingdom of Saudi Arabia.
      </p>

      <div class="about-split">
        <div class="about-card">
          <div class="about-kicker">What we do</div>
          <p class="about-quote">
            Curated exhibitions, original art productions, experimental formats, and content-driven platforms that position art as both cultural capital
            and contemporary dialogue.
          </p>
          <div class="about-pill-row">
            <div class="about-pill">Curated Art Platforms</div>
            <div class="about-pill">Art Objects & Installations</div>
            <div class="about-pill">Exhibitions & Programs</div>
            <div class="about-pill">Publications & Art Content</div>
          </div>
        </div>

        <div class="about-card">
          <div class="about-kicker">NDCC vision</div>
          <p class="about-quote">
            A central node for art content creation, curation, archiving, and distribution—bridging artists, collectors, institutions, and the public.
            Extending the physical art experience through digital presence and visual archives.
          </p>
          <div class="about-pill-row">
            <div class="about-pill">Cultural Partnerships</div>
            <div class="about-pill">Digital Presence</div>
            <div class="about-pill">Audience Engagement</div>
            <div class="about-pill">Narrative Building</div>
          </div>
        </div>
      </div>

      <div class="about-media">
        <img
          src="https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693d582b580fad0c77f39d0e_Gemini_Generated_Image_ir55ypir55ypir55%20(1).png"
          alt="About"
        >
      </div>
    </section>

    <!-- SERVICES -->
    <section id="sect-services" class="app-section">
      <h1 class="sec-title">Services</h1>
      <p class="sec-sub">A professional infrastructure for curated art experiences—planning, production, programs, and platform delivery.</p>

      <div class="services-wrap">
        <div class="services-grid">
          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M9 18h6"/><path d="M10 22h4"/><path d="M12 2a7 7 0 0 0-4 12c.8.7 1 1.4 1 2h6c0-.6.2-1.3 1-2A7 7 0 0 0 12 2z"/>
              </svg>
            </div>
            <h3 class="svc-title">Creative Planning</h3>
            <p class="svc-desc">Sculptural and contemporary art planning from a professional perspective—translating culture into form.</p>
          </div>

          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M4 20h16"/><path d="M6 16l12-12"/><path d="M15 4h3v3"/>
              </svg>
            </div>
            <h3 class="svc-title">Original design</h3>
            <p class="svc-desc">Inspired by renowned artists—featuring original designs by a professional sculpture and art design team.</p>
          </div>

          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M4 19V5"/><path d="M20 19V5"/><path d="M7 8h10"/><path d="M7 12h10"/><path d="M7 16h10"/>
              </svg>
            </div>
            <h3 class="svc-title">Excellent structure</h3>
            <p class="svc-desc">Qualification-led structural analysis for large-scale works—ensuring stability, safety, and longevity.</p>
          </div>

          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M12 3v18"/><path d="M3 12h18"/><path d="M5 5l14 14"/><path d="M19 5L5 19"/>
              </svg>
            </div>
            <h3 class="svc-title">Crafted with ingenuity</h3>
            <p class="svc-desc">Dedicated craftsmanship and refined execution—where detail, patience, and intent define the final work.</p>
          </div>

          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M4 20h16"/><path d="M6 20V9l6-4 6 4v11"/>
              </svg>
            </div>
            <h3 class="svc-title">Professional installation</h3>
            <p class="svc-desc">Integrated construction and installation workflows—safe completion with balanced production sequencing.</p>
          </div>

          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M4 7h16"/><path d="M6 7l1 14h10l1-14"/><path d="M9 7V5a3 3 0 0 1 6 0v2"/>
              </svg>
            </div>
            <h3 class="svc-title">Refurbishment and Restoration</h3>
            <p class="svc-desc">Renovation and restoration using professional teams and necessary equipment—bringing works back to life.</p>
          </div>

          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M3 20h18"/><path d="M7 20V8h10v12"/><path d="M9 12h6"/>
              </svg>
            </div>
            <h3 class="svc-title">Art rental</h3>
            <p class="svc-desc">Rental services for sculptures and works—supporting projects, institutions, and elevated temporary installations.</p>
          </div>

          <div class="svc">
            <div class="svc-ico">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.6">
                <path d="M12 21s7-4.4 7-11a7 7 0 0 0-14 0c0 6.6 7 11 7 11z"/><path d="M12 10.5a1.5 1.5 0 1 0 0 .01"/>
              </svg>
            </div>
            <h3 class="svc-title">Site survey</h3>
            <p class="svc-desc">On-site inspection, survey reporting, and coordination—aligning implementation with the artistic vision.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="sect-gallery" class="app-section active-section">
      <header class="shop-head">
        <nav class="nav-group" id="filters">
          <button class="chip active" data-filter="all" id="btnAll">ALL</button>
          <button class="chip" data-filter="cabinet">Cabinets</button>
          <button class="chip" data-filter="sideboard">Sideboards</button>
          <button class="chip" data-filter="decor">Decor</button>
        </nav>
      </header>

      <div class="shop-body">
        <div class="grid" id="grid"></div>

        <div class="solo-wrap" id="soloWrap">
          <div class="back-nav"><button class="btn-back" id="btnBack">← Back to Collection</button></div>

          <div class="solo-media-container" id="soloMediaContainer">
            <div class="media-tabs" id="mediaTabs"></div>
            <div class="solo-media-inner" id="soloMedia"></div>
          </div>

          <div class="solo-info-block">
            <div class="solo-desc">
              <strong id="soloTitle">PRODUCT</strong><br>
              Contemporary design meeting functionality.
              <div class="data-row">
                <div class="data-item"><span>Material</span><span id="spMat">--</span></div>
                <div class="data-item"><span>Dimensions</span><span id="spDim">--</span></div>
                <div class="data-item"><span>Location</span><span id="soloStore">--</span></div>
              </div>
            </div>

            <div class="artist-profile" id="artistBtn">
              <div class="avatar"><img id="artistImg" src="" alt="Designer"></div>
              <div class="artist-info"><h4 id="artistName">--</h4><p id="artistRole">--</p></div>
              <div class="artist-cta">View Bio →</div>
            </div>

            <div class="actions">
              <button class="btn btn-primary" id="btnContactProduct">Contact Us</button>
              <button class="btn btn-ghost" id="btnClose">Close</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="sect-contact" class="app-section">
      <h1 class="sec-title">Get in Touch</h1>
      <p class="sec-sub">Interested in a piece? Let us know.</p>

      <form id="ajaxForm" action="https://formsubmit.co/anaskaroti@gmail.com" method="POST">
        <input type="hidden" name="_captcha" value="false">
        <input type="hidden" name="_template" value="table">
        <div class="form-group"><input type="text" class="form-input" name="name" placeholder="Your Name" required></div>
        <div class="form-group"><input type="email" class="form-input" name="email" placeholder="Your Email" required></div>
        <div class="form-group"><input type="text" class="form-input" name="subject" placeholder="Subject" id="formSubject"></div>
        <div class="form-group"><textarea class="form-input" name="message" placeholder="Message..." rows="4"></textarea></div>
        <button type="submit" class="btn-submit" id="formSubmitBtn">Send Inquiry</button>
      </form>
      <div id="formSuccess">Thank you! Your inquiry has been received.</div>
    </section>
  </aside>
</div>

<!-- MODALS -->
<div class="modal-overlay" id="modalArtistOverlay">
  <div class="modal-box">
    <button class="close-modal" id="closeArtistModal">×</button>
    <div class="artist-modal-header">
      <div class="artist-modal-avatar"><img id="modalArtistImg" src="" alt=""></div>
      <h3 id="modalArtistName"></h3>
      <span style="font-size:12px; color:#999; text-transform:uppercase;" id="modalArtistRole"></span>
    </div>
    <p class="artist-modal-bio" id="modalArtistBio"></p>
  </div>
</div>

<div class="modal-overlay" id="modalContactOverlay">
  <div class="modal-box">
    <button class="close-modal" id="closeContactModal">×</button>
    <h3 class="form-title">Inquire about this piece</h3>
    <form id="ajaxFormModal" action="https://formsubmit.co/anaskaroti@gmail.com" method="POST">
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_template" value="table">
      <div class="form-group"><input type="text" class="form-input" name="name" placeholder="Your Name" required></div>
      <div class="form-group"><input type="email" class="form-input" name="email" placeholder="Your Email" required></div>
      <div class="form-group"><input type="text" class="form-input" name="subject" placeholder="Subject" id="formSubjectModal"></div>
      <div class="form-group"><textarea class="form-input" name="message" placeholder="Message..." rows="4"></textarea></div>
      <button type="submit" class="btn-submit" id="formSubmitBtnModal">Send Inquiry</button>
    </form>
    <div id="formSuccessModal">Thank you! Your inquiry has been received.</div>
  </div>
</div>

<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>

<script>
  /* ===== MAP CONFIG ===== */
  const MAPBOX_TOKEN = "pk.eyJ1IjoiYW5hc2thcm90aSIsImEiOiJjbWhqcHgwcmMwbWM0MmxwZ2V5Z2x5OTN0In0.bpOf-4BsljExZdYZUak_pw";
  const USER_STYLE = "mapbox://styles/anaskaroti/cmhuiic1f00ft01qucn91gk6e";

  mapboxgl.accessToken = MAPBOX_TOKEN;
  const isMobile = window.innerWidth < 900;
  const startZoom = isMobile ? 0 : 0.8;

  const map = new mapboxgl.Map({
    container: "map",
    style: USER_STYLE,
    center: [0, 20],
    zoom: startZoom,
    pitch: 0,
    projection: "globe"
  });

  map.on("style.load", () => {
    try {
      map.setFog({
        "color": "rgb(255, 255, 255)",
        "high-color": "rgb(200, 200, 200)",
        "space-color": "rgb(0, 0, 0)",
        "star-intensity": 0.6
      });
    } catch(e){}

    const layers = map.getStyle().layers || [];
    let labelLayerId;
    for (const layer of layers) {
      if (layer.type === "symbol" && layer.layout && layer.layout["text-field"]) {
        labelLayerId = layer.id;
        break;
      }
    }

    if (!map.getLayer("3d-buildings-custom")) {
      map.addLayer({
        "id": "3d-buildings-custom",
        "source": "composite",
        "source-layer": "building",
        "filter": ["==", "extrude", "true"],
        "type": "fill-extrusion",
        "minzoom": 15,
        "paint": {
          "fill-extrusion-color": "#aaa",
          "fill-extrusion-height": ["get", "height"],
          "fill-extrusion-base": ["get", "min_height"],
          "fill-extrusion-opacity": 0.6
        }
      }, labelLayerId);
    }
  });

  /* ===== NAVIGATION LOGIC ===== */
  window.switchSection = function(id){
    // sections
    document.querySelectorAll(".app-section").forEach(s => s.classList.remove("active-section"));
    const target = document.getElementById(id);
    if (target) target.classList.add("active-section");

    // desktop nav
    document.querySelectorAll(".nav-item").forEach(n => n.classList.remove("active"));
    const navIdMap = {
      "sect-home": "navHome",
      "sect-about": "navAbout",
      "sect-services": "navServices",
      "sect-gallery": "navGallery",
      "sect-contact": "navContact"
    };
    const navEl = document.getElementById(navIdMap[id]);
    if (navEl) navEl.classList.add("active");

    // mobile nav
    document.querySelectorAll(".mnav-item").forEach(n => n.classList.remove("active"));
    const mnavMap = {
      "sect-home": "mnavHome",
      "sect-about": "mnavAbout",
      "sect-services": "mnavServices",
      "sect-gallery": "mnavGallery",
      "sect-contact": "mnavContact"
    };
    const mEl = document.getElementById(mnavMap[id]);
    if (mEl) mEl.classList.add("active");

    // map motion only for home
    if(id === "sect-home"){
      map.flyTo({ center:[0,20], zoom:startZoom, pitch:0, bearing:0, duration:1600 });
    }
  };

  const safeAdd = (id, ev, handler) => {
    const el = document.getElementById(id);
    if (el) el.addEventListener(ev, handler);
  };

  safeAdd("navHome","click",() => switchSection("sect-home"));
  safeAdd("navAbout","click",() => switchSection("sect-about"));
  safeAdd("navServices","click",() => switchSection("sect-services"));
  safeAdd("navGallery","click",() => switchSection("sect-gallery"));
  safeAdd("navContact","click",() => switchSection("sect-contact"));

  const mobileNav = document.getElementById("mobileNav");
  if (mobileNav){
    mobileNav.addEventListener("click", (e) => {
      const btn = e.target.closest(".mnav-item");
      if(!btn) return;
      const target = btn.getAttribute("data-target");
      if(target) switchSection(target);
    });
  }

  /* ===== FORM LOGIC ===== */
  const form = document.getElementById("ajaxForm");
  const submitBtn = document.getElementById("formSubmitBtn");
  const successMsg = document.getElementById("formSuccess");

  if(form){
    form.addEventListener("submit", function(e){
      e.preventDefault();
      if(submitBtn){ submitBtn.textContent="Sending..."; submitBtn.style.opacity="0.7"; }
      fetch(form.action, { method:"POST", body:new FormData(form), headers:{ "Accept":"application/json" }})
        .then(r => {
          if(r.ok){
            form.style.display="none";
            if(successMsg) successMsg.style.display="block";
          }else{
            alert("Oops! Problem submitting.");
            if(submitBtn) submitBtn.textContent="Try Again";
          }
        })
        .catch(() => {
          alert("Oops! Problem submitting.");
          if(submitBtn) submitBtn.textContent="Try Again";
        });
    });
  }

  const formModal = document.getElementById("ajaxFormModal");
  const submitBtnModal = document.getElementById("formSubmitBtnModal");
  const successMsgModal = document.getElementById("formSuccessModal");

  if(formModal){
    formModal.addEventListener("submit", function(e){
      e.preventDefault();
      if(submitBtnModal){ submitBtnModal.textContent="Sending..."; submitBtnModal.style.opacity="0.7"; }
      fetch(formModal.action, { method:"POST", body:new FormData(formModal), headers:{ "Accept":"application/json" }})
        .then(r => {
          if(r.ok){
            formModal.style.display="none";
            if(successMsgModal) successMsgModal.style.display="block";
          }else{
            alert("Oops! Problem submitting.");
            if(submitBtnModal) submitBtnModal.textContent="Try Again";
          }
        })
        .catch(() => {
          alert("Oops! Problem submitting.");
          if(submitBtnModal) submitBtnModal.textContent="Try Again";
        });
    });
  }

  /* ===== MAP ANIMATION ===== */
  let currentMarker = null;
  let rotationFrame = null;

  function gotoStore(store){
    if(!store) return;
    if(rotationFrame){ cancelAnimationFrame(rotationFrame); rotationFrame=null; }
    if(currentMarker) currentMarker.remove();

    const el = document.createElement("div");
    el.style.backgroundColor="#111";
    el.style.width="20px";
    el.style.height="20px";
    el.style.borderRadius="50%";
    el.style.border="2px solid white";

    currentMarker = new mapboxgl.Marker(el).setLngLat(store.coords).addTo(map);

    map.flyTo({
      center: store.coords,
      zoom: 16.5,
      pitch: 65,
      bearing: Math.random()*90,
      speed: 0.3,
      curve: 1.2,
      essential: true,
      duration: 9000
    });

    map.once("moveend", () => {
      function rotate(){
        map.rotateTo((map.getBearing()+0.05)%360, { duration:0 });
        rotationFrame = requestAnimationFrame(rotate);
      }
      rotate();
    });
  }

  /* ===== PRODUCT MEDIA ASSETS ===== */
  const SHARED_IMAGES = [
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9c47857d958372698_Gemini_Generated_Image_yiit8eyiit8eyiit.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9fd2fa99da51c575a_Gemini_Generated_Image_qrrx4iqrrx4iqrrx.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9978004d5fa2a3d3a_Gemini_Generated_Image_6hnali6hnali6hna.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9ff7c4713583ae7b5_Gemini_Generated_Image_im37uhim37uhim37.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca8c4a4dc0af86da352_Gemini_Generated_Image_rn5h5urn5h5urn5h.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca8c641d77b3de17010_Gemini_Generated_Image_mhci8mmhci8mmhci.png"
  ];

  const VIDEO_360 = "https://raw.githubusercontent.com/lwiise/3d-models/main/Product_Video_Generation_With_Rotation.mp4";
  const VIDEO_MAIN = "https://raw.githubusercontent.com/lwiise/3d-models/main/Artistic_Video_Generation_Request.mp4";

  /* ===== DATA ===== */
  const PRODUCTS = [
    { id:"item-1", name:"Arch Cabinet", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a23d0fd8b7e2bc457_Screenshot_2025-11-23_141726-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(5).glb",
      specs:{ mat:"Velvet & Wood", dim:"120x60x90" }, store:{ name:"Milan Design District", coords:[9.1900,45.4642] },
      artist:{ name:"Alessandro Rossi", role:"Art Director, Milano", img:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=100&q=80", bio:"Alessandro combines classical Italian joinery with bold, modern geometric forms." } },

    { id:"item-2", name:"Geometric Side", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a7e9f217180e18c6d_Screenshot_2025-11-23_142545-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20%289%29.glb",
      specs:{ mat:"Lacquered Wood", dim:"180x50x200" }, store:{ name:"Paris Le Marais", coords:[2.3522,48.8566] },
      artist:{ name:"Claire Dubois", role:"Sculptor, Paris", img:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=100&q=80", bio:"Claire challenges the perception of stability with her organic, tree-like structures." } },

    { id:"item-3", name:"Art Deco Tall", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a3f4cd0cdf6848da0_Screenshot_2025-11-23_142423-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(7).glb",
      specs:{ mat:"Marble & Brass", dim:"220x80x95" }, store:{ name:"New York SoHo", coords:[-74.006,40.7128] },
      artist:{ name:"Marcus Thorne", role:"Industrial Designer, NY", img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=100&q=80", bio:"Marcus revives 1920s Art Deco aesthetics for the modern Manhattan loft." } },

    { id:"item-4", name:"Striped Console", category:"decor", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a8659147dcb3f38ed_Screenshot_2025-11-23_142604-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1763910785694_base%20(4).glb",
      specs:{ mat:"Resin & Paint", dim:"100x60x140" }, store:{ name:"Tokyo Harajuku", coords:[139.7034,35.6719] },
      artist:{ name:"Kenji Sato", role:"Pop Artist, Tokyo", img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=100&q=80", bio:"Kenji blurs the lines between collectible toys and functional high-end furniture." } },

    { id:"item-5", name:"Radiance Credenza", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a361104af2bd0614b_Screenshot_2025-11-23_142501-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(8).compressed.glb",
      specs:{ mat:"Ebony & Gold", dim:"200x55x85" }, store:{ name:"Dubai Design Dist", coords:[55.2962,25.2769] },
      artist:{ name:"Zara Al-Fayed", role:"Luxury Artisan, Dubai", img:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=100&q=80", bio:"Zara's work is a fusion of traditional Middle Eastern patterns and ultra-modern luxury." } },

    { id:"item-6", name:"Modular Unit", category:"decor", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a36286c4236e924d2_Screenshot_2025-11-23_142346-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20%286%29.glb",
      specs:{ mat:"Ceramic Composite", dim:"120x120x120" }, store:{ name:"Copenhagen", coords:[12.5683,55.6761] },
      artist:{ name:"Erik Jensen", role:"Minimalist, Copenhagen", img:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=100&q=80", bio:"Erik believes in infinite adaptability. His modular systems grow with the user." } },

    { id:"item-7", name:"Lunar Chest", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620c47e4acac61094bf_Screenshot_2025-11-24_171517-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071266806_base%20(15).glb",
      specs:{ mat:"Oak & Silver", dim:"110x55x130" }, store:{ name:"London Tate Modern", coords:[-0.099,51.507] },
      artist:{ name:"Oliver Sterling", role:"Modernist, London", img:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=100&q=80", bio:"Oliver explores celestial themes using industrial materials." } },

    { id:"item-8", name:"Obsidian Block", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620636bab60cf866e4e_Screenshot_2025-11-24_171459-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071270533_base%20(14).glb",
      specs:{ mat:"Blackened Steel", dim:"200x60x80" }, store:{ name:"Berlin Mitte", coords:[13.405,52.520] },
      artist:{ name:"Klaus Weber", role:"Architect, Berlin", img:"https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?auto=format&fit=crop&w=100&q=80", bio:"Klaus brings brutalist architecture principles into interior design." } },

    { id:"item-9", name:"Azure Tower", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620466eab1b5ac247c4_Screenshot_2025-11-24_171450-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071273205_base%20(13).glb",
      specs:{ mat:"Blue Lacquer", dim:"80x80x180" }, store:{ name:"Barcelona Eixample", coords:[2.168,41.387] },
      artist:{ name:"Sofia Miró", role:"Colorist, Barcelona", img:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=100&q=80", bio:"Sofia's work is a vibrant homage to the Mediterranean spirit." } },

    { id:"item-10", name:"Solar Credenza", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/692486204f857514d1d4b590_Screenshot_2025-11-24_171432-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071348834_base%20(12).glb",
      specs:{ mat:"Teak & Brass", dim:"220x50x75" }, store:{ name:"Mexico City Polanco", coords:[-99.19,19.43] },
      artist:{ name:"Diego Rivera", role:"Carpenter, CDMX", img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=100&q=80", bio:"Diego fuses Aztec geometry with mid-century modern lines." } },

    { id:"item-11", name:"Nordic Wave", category:"decor", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620b770e284e36cee5d_Screenshot_2025-11-24_171419-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071190268_base%20(11).glb",
      specs:{ mat:"Ash Wood", dim:"140x40x90" }, store:{ name:"Stockholm Södermalm", coords:[18.068,59.329] },
      artist:{ name:"Elina Vinter", role:"Designer, Stockholm", img:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?auto=format&fit=crop&w=100&q=80", bio:"Elina captures the fluidity of water in solid wood forms." } },

    { id:"item-12", name:"Crimson Vanity", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620cbc59348dc423f83_Screenshot_2025-11-24_171401-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071194478_base%20(10).glb",
      specs:{ mat:"Red Velvet & Gold", dim:"100x50x150" }, store:{ name:"Seoul Gangnam", coords:[127.027,37.497] },
      artist:{ name:"Min-Jun Kim", role:"Fashion Designer, Seoul", img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=100&q=80", bio:"Min-Jun treats furniture like haute couture, focusing on texture and drama." } }
  ].map(p => ({
    ...p,
    images: SHARED_IMAGES.slice(),
    video360: VIDEO_360,
    video: VIDEO_MAIN
  }));

  const grid = document.getElementById("grid");
  const soloMedia = document.getElementById("soloMedia");
  const mediaTabs = document.getElementById("mediaTabs");

  function render(list){
    if(!grid) return;
    grid.innerHTML = "";
    list.forEach(p => {
      const el = document.createElement("article");
      el.className = "card";
      el.innerHTML = `
        <div class="card-media"><img src="${p.img}" alt="${p.name}"/></div>
        <div class="card-name">${p.name}</div>
        <div class="card-sub">Edition 2024</div>`;
      el.addEventListener("click", () => openSolo(p));
      grid.appendChild(el);
    });
  }

  const filtersEl = document.getElementById("filters");
  if(filtersEl){
    filtersEl.addEventListener("click", e => {
      const btn = e.target.closest(".chip");
      if(!btn) return;
      document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
      btn.classList.add("active");
      const f = btn.dataset.filter;
      render(f === "all" ? PRODUCTS : PRODUCTS.filter(p => p.category === f));
    });
  }

  /* ===== SOLO MEDIA (Images / 360 / Video / 3D) ===== */
  let currentProduct = null;
  let imgIndex = 0;

  function buildTabs(active){
    const tabs = [
      { key:"images", label:"Images" },
      { key:"360", label:"360" },
      { key:"video", label:"Video" },
      { key:"3d", label:"3D" }
    ];
    mediaTabs.innerHTML = tabs.map(t =>
      `<button class="mtab ${t.key===active ? "active":""}" data-k="${t.key}">${t.label}</button>`
    ).join("");

    mediaTabs.onclick = (e) => {
      const b = e.target.closest(".mtab");
      if(!b) return;
      renderMedia(b.getAttribute("data-k"));
    };
  }

  function renderMedia(mode){
    if(!currentProduct) return;
    buildTabs(mode);

    if(mode === "images"){
      imgIndex = 0;
      drawCarousel();
      return;
    }

    if(mode === "360"){
      soloMedia.innerHTML = `
        <div class="p360-wrap">
          <video id="v360" src="${currentProduct.video360}" playsinline preload="metadata"></video>
          <div class="p360-controls">
            <button class="p360-btn" id="v360Btn" aria-label="play/pause">⏵</button>
            <input class="p360-range" id="v360Range" type="range" min="0" max="1000" value="0">
          </div>
        </div>
      `;

      const v = document.getElementById("v360");
      const btn = document.getElementById("v360Btn");
      const rng = document.getElementById("v360Range");

      const setBtn = () => { btn.textContent = v.paused ? "⏵" : "⏸"; };

      v.addEventListener("loadedmetadata", () => {
        rng.value = 0;
        setBtn();
      });

      btn.addEventListener("click", () => {
        if(v.paused) v.play(); else v.pause();
        setBtn();
      });

      v.addEventListener("timeupdate", () => {
        if(!v.duration) return;
        rng.value = Math.round((v.currentTime / v.duration) * 1000);
      });

      rng.addEventListener("input", () => {
        if(!v.duration) return;
        v.currentTime = (rng.value / 1000) * v.duration;
      });

      return;
    }

    if(mode === "video"){
      soloMedia.innerHTML = `
        <video src="${currentProduct.video}" controls playsinline style="width:100%;height:100%;object-fit:cover;border-radius:28px;"></video>
      `;
      return;
    }

    if(mode === "3d"){
      const safeUrl = (currentProduct.model || "")
        .replace(/\(/g, "%28").replace(/\)/g, "%29").replace(/ /g, "%20");

      soloMedia.innerHTML = `
        <model-viewer
          id="viewer3d"
          src="${safeUrl}"
          camera-controls
          auto-rotate
          shadow-intensity="1"
          style="background:transparent; width:100%; height:100%;"
          camera-orbit="45deg 75deg 3m"
          environment-image="neutral"
          alt="3D">
        </model-viewer>
      `;
      const viewer = document.getElementById("viewer3d");
      if(viewer){
        viewer.addEventListener("error", () => {
          soloMedia.innerHTML = `<img src="${currentProduct.img}" alt="${currentProduct.name}" />`;
        });
      }
      return;
    }
  }

  function drawCarousel(){
    const imgs = currentProduct.images || [];
    const current = imgs[imgIndex] || currentProduct.img;

    soloMedia.innerHTML = `
      <div class="img-stage">
        <img src="${current}" alt="Image ${imgIndex+1}">
        <button class="img-arrow left" id="imgPrev" aria-label="previous">‹</button>
        <button class="img-arrow right" id="imgNext" aria-label="next">›</button>
        <div class="img-dots" id="imgDots">
          ${imgs.map((_,i)=>`<div class="dot ${i===imgIndex?"active":""}"></div>`).join("")}
        </div>
      </div>
    `;

    const prev = document.getElementById("imgPrev");
    const next = document.getElementById("imgNext");

    if(prev) prev.onclick = () => { imgIndex = (imgIndex - 1 + imgs.length) % imgs.length; drawCarousel(); };
    if(next) next.onclick = () => { imgIndex = (imgIndex + 1) % imgs.length; drawCarousel(); };
  }

  function openSolo(p){
    currentProduct = p;

    document.getElementById("shop").classList.add("solo");
    document.getElementById("sect-gallery").classList.add("solo");

    document.getElementById("soloTitle").textContent = p.name.toUpperCase();
    document.getElementById("soloStore").textContent = p.store.name;
    document.getElementById("spMat").textContent = p.specs.mat;
    document.getElementById("spDim").textContent = p.specs.dim;

    document.getElementById("artistName").textContent = p.artist.name;
    document.getElementById("artistRole").textContent = p.artist.role;
    document.getElementById("artistImg").src = p.artist.img;

    document.getElementById("modalArtistName").textContent = p.artist.name;
    document.getElementById("modalArtistRole").textContent = p.artist.role;
    document.getElementById("modalArtistImg").src = p.artist.img;
    document.getElementById("modalArtistBio").textContent = p.artist.bio;

    const fs = document.getElementById("formSubject");
    if (fs) fs.value = "Inquiry: " + p.name;
    const fsM = document.getElementById("formSubjectModal");
    if (fsM) fsM.value = "Inquiry: " + p.name;

    const sideNav = document.querySelector(".side-nav");
    if (sideNav) sideNav.classList.add("focused");

    renderMedia("images");
    gotoStore(p.store);
  }

  function closeSolo(){
    const shopEl = document.getElementById("shop");
    const galleryEl = document.getElementById("sect-gallery");
    if (shopEl) shopEl.classList.remove("solo");
    if (galleryEl) galleryEl.classList.remove("solo");

    const sideNav = document.querySelector(".side-nav");
    if (sideNav) sideNav.classList.remove("focused");

    if(rotationFrame){ cancelAnimationFrame(rotationFrame); rotationFrame=null; }

    const isMobileReset = window.innerWidth < 900;
    map.flyTo({ center:[0,20], zoom:isMobileReset ? 0 : 0.8, pitch:0, bearing:0, duration:2200 });
  }

  safeAdd("btnBack","click",closeSolo);
  safeAdd("btnClose","click",closeSolo);
  safeAdd("btnContactProduct","click",() => switchSection("sect-contact"));

  /* Modals */
  const modalArtist = document.getElementById("modalArtistOverlay");
  const modalContact = document.getElementById("modalContactOverlay");

  const artistBtnEl = document.getElementById("artistBtn");
  if(artistBtnEl) artistBtnEl.addEventListener("click", () => { if(modalArtist) modalArtist.classList.add("open"); });

  const closeArtistModalBtn = document.getElementById("closeArtistModal");
  if(closeArtistModalBtn) closeArtistModalBtn.addEventListener("click", () => { if(modalArtist) modalArtist.classList.remove("open"); });

  const closeContactModalBtn = document.getElementById("closeContactModal");
  if(closeContactModalBtn) closeContactModalBtn.addEventListener("click", () => { if(modalContact) modalContact.classList.remove("open"); });

  window.addEventListener("click", e => {
    if(e.target === modalArtist && modalArtist) modalArtist.classList.remove("open");
    if(e.target === modalContact && modalContact) modalContact.classList.remove("open");
  });

  /* ===== INITIAL RENDER (fix: ensure 12 show + scroll works) ===== */
  (function initGalleryOnLoad(){
    function initGallery(){
      try{
        const gridNode = document.getElementById("grid");
        if(!gridNode) return;

        let btnAll = document.getElementById("btnAll");
        if (!btnAll) btnAll = document.querySelector('.chip[data-filter="all"]');

        document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
        if (btnAll) btnAll.classList.add("active");

        // ensure gallery section active
        switchSection("sect-gallery");

        render(PRODUCTS);
      }catch(err){
        console.error("[initGallery] error", err);
      }
    }

    if (document.readyState === "complete" || document.readyState === "interactive") {
      setTimeout(initGallery, 30);
    } else {
      document.addEventListener("DOMContentLoaded", () => setTimeout(initGallery, 30));
    }
  })();

  window._finna_render = () => render(PRODUCTS);
</script>
</body>
</html>
