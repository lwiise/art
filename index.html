<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Finna Art ‚Äî Gallery</title>
<link href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css" rel="stylesheet" />
<style>
  :root{
    --bg:#fff;
    --text-main:#222;
    --accent:#111;
    --muted:#666;
    --card-radius:32px;
    --btn-radius:30px;
  }

  *,*::before,*::after{ box-sizing:border-box; -webkit-font-smoothing:antialiased; }
  body{
    margin:0; height:100vh; width:100vw;
    background:var(--bg); color:var(--text-main);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
    overflow:hidden;
  }

  /* ===== LAYOUT ===== */
  .layout{ display:flex; height:100%; width:100%; overflow:hidden; }

  /* Map */
  #map{
    flex:0 0 31vw;            /* ‚úÖ right side (shop) takes 69% */
    height:100vh;
    background:#000;
    position:relative;
    overflow:hidden;
  }

  /* Map B&W */
  .mapboxgl-canvas{ outline:none; filter:grayscale(100%) contrast(1.2) brightness(0.9); }

  /* ===== SIDE NAV (DESKTOP) ===== */
  .side-nav{
    position:absolute; top:50%; right:0; transform:translateY(-50%);
    display:flex; flex-direction:column; z-index:20;
    background:rgba(0,0,0,0.45);             /* ‚úÖ darker bg */
    backdrop-filter:blur(16px); -webkit-backdrop-filter:blur(16px);
    border-radius:22px 0 0 22px;
    border-left:1px solid rgba(255,255,255,0.12);
    border-top:1px solid rgba(255,255,255,0.08);
    border-bottom:1px solid rgba(255,255,255,0.08);
    box-shadow:-10px 0 30px rgba(0,0,0,0.35);
  }
  .side-nav.focused{
    background:rgba(0,0,0,0.70);
    border-color:rgba(255,255,255,0.10);
  }
  .nav-item{
    padding:28px 36px;
    color:rgba(255,255,255,0.85);
    font-weight:700; font-size:13px;
    text-transform:uppercase; letter-spacing:0.08em;
    border-bottom:1px solid rgba(255,255,255,0.10);
    cursor:pointer; text-align:center;
    text-shadow:0 2px 10px rgba(0,0,0,0.55);
    transition:all .25s ease;
    user-select:none;
  }
  .nav-item:last-child{ border-bottom:none; }
  .nav-item:hover,
  .nav-item.active{
    background:rgba(255,255,255,0.12);
    color:#fff;
    padding-right:46px;
  }

  /* ===== MOBILE NAV (OVER MAP) ===== */
  .mobile-nav{
    display:none;
    position:absolute;
    left:50%; transform:translateX(-50%);
    bottom:14px;
    z-index:30;
    background:rgba(0,0,0,0.55);
    backdrop-filter:blur(16px); -webkit-backdrop-filter:blur(16px);
    border:1px solid rgba(255,255,255,0.10);
    box-shadow:0 14px 30px rgba(0,0,0,0.35);
    border-radius:18px;
    padding:8px;
    gap:8px;
  }
  .mobile-nav .nav-item{
    border:none;
    padding:12px 14px;
    border-radius:14px;
    font-size:11px;
    letter-spacing:0.07em;
    white-space:nowrap;
    background:transparent;
  }
  .mobile-nav .nav-item:hover,
  .mobile-nav .nav-item.active{
    padding:12px 14px;
    background:rgba(255,255,255,0.14);
  }

  /* ===== SHOP (RIGHT) ===== */
  .shop{
    flex:1;
    display:flex;
    flex-direction:column;
    height:100vh;
    background:#fff;
    position:relative;
    z-index:5;
    box-shadow:-10px 0 40px rgba(0,0,0,0.05);
    overflow:hidden;
  }

  /* Sections layer system */
  .app-section{
    position:absolute; inset:0;
    display:flex; flex-direction:column;
    background:#fff;
    opacity:0; visibility:hidden; pointer-events:none;
    transform:translateY(18px);
    transition:opacity .35s ease, transform .35s ease;
    z-index:1;
  }
  .app-section.active-section{
    opacity:1; visibility:visible; pointer-events:auto;
    transform:translateY(0); z-index:10;
  }

  /* scroll container inside each section */
  .section-scroll{
    height:100%;
    overflow-y:auto;
    padding:40px;
  }

  /* ‚úÖ Scrollbars visible again (all sections) */
  .section-scroll, .shop-body{
    -ms-overflow-style:auto;
    scrollbar-width:auto;
  }
  .section-scroll::-webkit-scrollbar, .shop-body::-webkit-scrollbar{ width:10px; height:10px; }
  .section-scroll::-webkit-scrollbar-thumb, .shop-body::-webkit-scrollbar-thumb{
    background:rgba(0,0,0,.22);
    border-radius:999px;
  }
  .section-scroll::-webkit-scrollbar-track, .shop-body::-webkit-scrollbar-track{ background:transparent; }

  /* ===== TITLES ===== */
  h1.sec-title{ font-size:34px; font-weight:900; margin:0 0 12px; letter-spacing:-0.02em; color:#111; }
  p.sec-sub{ font-size:16px; color:var(--muted); line-height:1.7; margin:0 0 24px; width:100%; }

  /* ===== HOME ===== */
  .home-hero{
    width:100%;
    height:420px;
    border-radius:28px;
    background:#f2f2f2;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    box-shadow:0 18px 40px rgba(0,0,0,0.06);
    margin-bottom:26px;
  }
  .home-hero img{
    width:100%;
    height:100%;
    object-fit:contain;     /* ‚úÖ logo fills the whole hero space (no extra empty block) */
  }
  .btn-hero{
    display:inline-block;
    width:auto !important;
    padding:14px 36px;
    background:#111;
    color:#fff;
    border:none;
    border-radius:999px;
    font-size:14px;
    font-weight:800;
    cursor:pointer;
    box-shadow:0 10px 24px rgba(0,0,0,0.15);
  }
  .btn-hero:hover{ transform:translateY(-2px); background:#000; }

  /* ===== GALLERY ===== */
  #sect-gallery{ padding:0; }
  .shop-head{
    flex-shrink:0;
    position:sticky; top:0;
    background:rgba(255,255,255,0.96);
    backdrop-filter:blur(10px);
    z-index:12;
    padding:22px 30px;
    border-bottom:1px solid #f0f0f0;
  }

  .nav-group{
    display:flex; gap:10px; align-items:center;
    flex-wrap:nowrap;              /* ‚úÖ one line */
    overflow-x:auto;
    scrollbar-width:none;
  }
  .nav-group::-webkit-scrollbar{ display:none; }
  .chip{
    border:none;
    background:transparent;
    font-size:14px;
    color:#999;
    cursor:pointer;
    padding:8px 12px;
    transition:all .2s;
    font-weight:600;
    white-space:nowrap;
    border-radius:999px;
  }
  .chip:hover{ color:#333; }
  .chip.active{
    background:var(--accent);
    color:#fff;
    padding:8px 22px;
  }

  .shop-body{
    padding:22px 30px 70px;
    flex-grow:1;
    overflow-y:auto;
    min-height:0;
  }

  .grid{
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(220px, 1fr));
    gap:26px;
    width:100%;
  }
  .card{
    background:#fff;
    border:1px solid #f3f3f3;
    border-radius:28px;
    padding:26px 18px;
    cursor:pointer;
    transition:transform .25s ease, box-shadow .25s ease;
    display:flex;
    flex-direction:column;
    align-items:center;
    text-align:center;
  }
  .card:hover{ transform:translateY(-6px); box-shadow:0 18px 42px rgba(0,0,0,0.07); }
  .card-media{ width:100%; height:180px; display:flex; align-items:center; justify-content:center; margin-bottom:16px; }
  .card-media img{ max-width:100%; max-height:100%; object-fit:contain; filter:drop-shadow(0 12px 18px rgba(0,0,0,0.10)); }
  .card-name{ font-size:12px; font-weight:900; letter-spacing:0.10em; color:#b0b0b0; text-transform:uppercase; margin-bottom:6px; }
  .card-sub{ font-size:10px; color:#d0d0d0; text-transform:uppercase; letter-spacing:0.06em; }

  /* SOLO */
  .solo-wrap{ display:none; }
  #sect-gallery.solo .grid{ display:none; }
  #sect-gallery.solo .solo-wrap{ display:block; }

  .back-nav{ margin:10px 0 16px; }
  .btn-back{
    background:none; border:none; padding:0;
    color:#999; font-size:13px; font-weight:700;
    cursor:pointer; display:inline-flex; align-items:center; gap:8px;
  }

  .solo-name{
    margin:10px 0 12px;
    font-size:22px;
    font-weight:900;
    letter-spacing:-0.02em;
    color:#111;
  }

  /* ‚úÖ product frame 16:9 */
  .solo-media-container{
    width:100%;
    aspect-ratio:16 / 9;
    background:#f3f3f3;
    border-radius:28px;
    overflow:hidden;
    position:relative;
    display:flex; align-items:center; justify-content:center;
    box-shadow:0 18px 40px rgba(0,0,0,0.06);
  }
  .solo-media-container img,
  .solo-media-container video{
    width:100%;
    height:100%;
    object-fit:cover;
  }
  model-viewer{ width:100%; height:100%; }

  /* Media tabs */
  .media-tabs{
    position:absolute;
    top:14px; right:14px;
    display:flex; gap:8px;
    padding:10px;
    border-radius:999px;
    background:rgba(0,0,0,0.30);
    backdrop-filter:blur(14px); -webkit-backdrop-filter:blur(14px);
  }
  .media-tab{
    border:none;
    cursor:pointer;
    padding:10px 16px;
    border-radius:999px;
    font-weight:900;
    letter-spacing:0.06em;
    text-transform:uppercase;
    font-size:12px;
    color:rgba(255,255,255,0.85);
    background:rgba(255,255,255,0.16);
    transition:all .2s ease;
    white-space:nowrap;
  }
  .media-tab.active{
    background:#fff;
    color:#111;
  }

  /* Image slider arrows */
  .img-arrow{
    position:absolute;
    top:50%; transform:translateY(-50%);
    width:44px; height:44px;
    border:none; border-radius:999px;
    background:rgba(0,0,0,0.35);
    color:#fff;
    cursor:pointer;
    display:flex; align-items:center; justify-content:center;
    font-size:18px;
    backdrop-filter:blur(10px);
  }
  .img-arrow.left{ left:14px; }
  .img-arrow.right{ right:14px; }

  /* Custom 360 controls (no native player UI) */
  .v360-ui{
    position:absolute;
    left:50%; transform:translateX(-50%);
    bottom:16px;
    width:min(740px, 86%);
    background:rgba(0,0,0,0.35);
    backdrop-filter:blur(12px);
    border-radius:999px;
    padding:10px 14px;
    display:flex; gap:12px; align-items:center;
  }
  .v360-btn{
    width:44px; height:36px;
    border:none; border-radius:12px;
    background:rgba(255,255,255,0.18);
    color:#fff;
    cursor:pointer;
    font-weight:900;
  }
  .v360-range{
    flex:1;
    -webkit-appearance:none;
    appearance:none;
    height:10px;
    border-radius:999px;
    background:rgba(255,255,255,0.22);
    outline:none;
  }
  .v360-range::-webkit-slider-thumb{
    -webkit-appearance:none;
    appearance:none;
    width:54px; height:22px;
    border-radius:999px;
    background:#fff;
    cursor:pointer;
    box-shadow:0 10px 18px rgba(0,0,0,0.18);
  }

  /* Info */
  .solo-info-block{ padding:18px 4px 0; }
  .solo-desc{
    text-align:left;
    color:#666;
    font-size:14px;
    line-height:1.7;
    border-top:1px solid #eee;
    padding-top:20px;
    margin-bottom:22px;
  }
  .data-row{ display:flex; flex-wrap:wrap; gap:26px; margin-top:14px; }
  .data-item span:first-child{
    display:block; font-size:10px; color:#999; text-transform:uppercase;
    font-weight:900; margin-bottom:4px; letter-spacing:0.08em;
  }
  .data-item span:last-child{ font-size:15px; font-weight:900; color:#222; }

  .artist-profile{
    display:flex; align-items:center; gap:14px;
    margin-top:18px;
    padding:16px;
    background:#fafafa;
    border-radius:20px;
    cursor:pointer;
    transition:all .2s ease;
    border:1px solid transparent;
  }
  .artist-profile:hover{
    background:#fff;
    border-color:#eee;
    box-shadow:0 10px 24px rgba(0,0,0,0.06);
    transform:translateY(-2px);
  }
  .avatar{ width:44px; height:44px; border-radius:50%; background:#eee; overflow:hidden; }
  .avatar img{ width:100%; height:100%; object-fit:cover; }
  .artist-info{ flex:1; }
  .artist-info h4{ margin:0; font-size:13px; color:#222; font-weight:900; }
  .artist-info p{ margin:2px 0 0; font-size:11px; color:#888; }
  .artist-cta{ font-size:11px; font-weight:900; color:#333; text-transform:uppercase; letter-spacing:0.06em; }

  .actions{ display:flex; gap:12px; margin-top:18px; }
  .btn{
    padding:14px 20px; border-radius:16px;
    border:none; font-size:13px; font-weight:800;
    cursor:pointer;
  }
  .btn-primary{ background:#111; color:#fff; flex:1; }
  .btn-ghost{ background:#f0f0f0; color:#666; }

  /* ===== SERVICES ===== */
  .services-wrap{ margin-top:10px; }
  .services-grid{
    display:grid;
    grid-template-columns:repeat(4, minmax(0, 1fr));
    gap:16px;
    margin-top:18px;
  }
  .svc-card{
    background:#fff;                 /* ‚úÖ no lines bg */
    border:1px solid #f0f0f0;
    border-radius:22px;
    padding:18px 18px 16px;
    box-shadow:0 10px 24px rgba(0,0,0,0.06); /* ‚úÖ shadow */
    transition:transform .22s ease, box-shadow .22s ease;
    min-height:160px;
  }
  .svc-card:hover{
    transform:translateY(-5px);
    box-shadow:0 18px 44px rgba(0,0,0,0.10);
  }
  .svc-ico{
    width:36px; height:36px; border-radius:14px;
    background:#f4f4f4;
    display:flex; align-items:center; justify-content:center;
    font-weight:900;
    margin-bottom:12px;
  }
  .svc-title{ font-size:18px; font-weight:950; margin:0 0 8px; color:#111; }
  .svc-desc{ margin:0; color:#666; line-height:1.6; font-size:13px; }

  /* ===== OUR PROCESS (WHITE THEME) ===== */
  .process{
    margin-top:26px;
    border-radius:28px;
    border:1px solid #efefef;
    background:#fff;
    padding:26px 22px;
    box-shadow:0 18px 40px rgba(0,0,0,0.06);
  }
  .process-head h2{
    margin:0 0 6px;
    font-size:28px;
    font-weight:950;
    color:#111;
    letter-spacing:-0.02em;
  }
  .process-head p{ margin:0 0 18px; color:#666; line-height:1.6; }

  .process-grid{
    position:relative;
    display:grid;
    grid-template-columns:70px 1fr;
    gap:16px;
    padding:6px 0 2px;
  }
  .proc-rail{
    position:relative;
  }
  .proc-line{
    position:absolute;
    left:34px;
    width:2px;
    background:#ddd;
    border-radius:999px;
  }
  .proc-dot{
    position:absolute;
    left:34px;
    width:18px; height:18px;
    border-radius:50%;
    background:#111;
    transform:translate(-50%, 0);
    transition:transform .35s cubic-bezier(.2,.8,.2,1); /* ‚úÖ smooth move */
    box-shadow:0 10px 18px rgba(0,0,0,0.12);
  }

  .proc-items{ display:flex; flex-direction:column; gap:18px; }
  .proc-step{
    border-radius:26px;
    border:1px solid #efefef;
    background:#fff;
    padding:22px;
    box-shadow:0 14px 30px rgba(0,0,0,0.06);
    display:grid;
    grid-template-columns:1fr 220px;
    gap:18px;
    min-height:160px; /* ‚úÖ more height */
    align-items:center;
  }
  .proc-kicker{
    font-size:12px;
    font-weight:950;
    letter-spacing:0.10em;
    text-transform:uppercase;
    color:#999;
    margin:0 0 8px;
  }
  .proc-title{ margin:0 0 8px; font-size:20px; font-weight:950; color:#111; }
  .proc-desc{ margin:0; color:#666; line-height:1.65; }
  .proc-illus{
    height:120px;
    border-radius:20px;
    border:1px solid #f0f0f0;
    background:linear-gradient(180deg,#f8f8f8,#f2f2f2);
    display:flex; align-items:center; justify-content:center;
    font-weight:900; color:#bbb; letter-spacing:0.08em;
    text-transform:uppercase;
    font-size:12px;
  }

  /* ===== CONTACT ===== */
  .form-title{ font-size:18px; font-weight:950; margin:0 0 18px; text-align:left; }
  .form-group{ margin-bottom:12px; }
  .form-input{
    display:block; width:100%;
    padding:14px;
    border:1px solid #eee;
    border-radius:14px;
    background:#fafafa;
    font-size:14px;
    color:#111;
  }
  .form-input:focus{ outline:none; border-color:#111; background:#fff; }
  .btn-submit{
    width:100%;
    background:#111; color:#fff;
    padding:14px;
    border-radius:14px;
    border:none;
    font-weight:950;
    cursor:pointer;
  }
  #formSuccess{ display:none; border-radius:14px; margin-top:14px; background:#f0f0f0; color:#333; padding:18px; }

  /* ===== MODALS ===== */
  .modal-overlay{
    position:fixed; inset:0;
    background:rgba(0,0,0,0.45);
    backdrop-filter:blur(5px);
    z-index:9999;
    display:none; align-items:center; justify-content:center;
    opacity:0; transition:opacity .25s ease;
  }
  .modal-overlay.open{ display:flex; opacity:1; }
  .modal-box{
    background:#fff;
    width:90%;
    max-width:420px;
    padding:28px;
    border-radius:26px;
    box-shadow:0 24px 60px rgba(0,0,0,0.22);
    transform:translateY(18px);
    transition:transform .25s cubic-bezier(.2,.8,.2,1);
    max-height:90vh;
    overflow-y:auto;
  }
  .modal-overlay.open .modal-box{ transform:translateY(0); }
  .close-modal{ position:absolute; top:16px; right:16px; background:none; border:none; font-size:22px; color:#999; cursor:pointer; }

  /* ===== MOBILE ===== */
  @media (max-width:900px){
    .layout{ flex-direction:column; }
    #map{
      width:100%;
      height:45vh;           /* ‚úÖ map takes less space */
      flex:none;
    }
    .shop{
      width:100%;
      height:60vh;
      flex:none;
      border-radius:26px 26px 0 0;
      margin-top:-30px;      /* ‚úÖ content goes over map */
      z-index:40;
    }
    .side-nav{ display:none; }
    .mobile-nav{ display:flex; }

    .section-scroll{ padding:22px; }
    .shop-head{ padding:18px 18px; }
    .shop-body{ padding:18px 18px 70px; }

    .grid{ grid-template-columns:repeat(2, 1fr); gap:14px; }
    .card{ padding:16px 12px; border-radius:24px; }
    .card-media{ height:118px; }

    .services-grid{ grid-template-columns:repeat(2, minmax(0, 1fr)); }
    .proc-step{ grid-template-columns:1fr; }
    .proc-illus{ height:100px; }
    .process-grid{ grid-template-columns:54px 1fr; }
    .proc-line, .proc-dot{ left:26px; }
  }
</style>
</head>

<body>
<div class="layout">
  <div id="map">
    <nav class="side-nav" id="sideNav">
      <div class="nav-item" id="navHome">Home</div>
      <div class="nav-item" id="navAbout">About Us</div>
      <div class="nav-item" id="navServices">Services</div>
      <div class="nav-item active" id="navGallery">Gallery</div>
      <div class="nav-item" id="navContact">Contacts</div>
    </nav>

    <!-- Mobile nav -->
    <nav class="mobile-nav" id="mobileNav">
      <div class="nav-item" id="mNavHome">Home</div>
      <div class="nav-item" id="mNavAbout">About</div>
      <div class="nav-item" id="mNavServices">Services</div>
      <div class="nav-item active" id="mNavGallery">Gallery</div>
      <div class="nav-item" id="mNavContact">Contacts</div>
    </nav>
  </div>

  <aside class="shop" id="shop">

    <!-- HOME -->
    <section id="sect-home" class="app-section">
      <div class="section-scroll">
        <div class="home-hero">
          <img
            src="https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693e9cd364bca27486a365c1_WhatsApp%20Image%202025-12-13%20at%2023.26.34_6e0cb159.jpg"
            alt="FNN ART Logo"
          />
        </div>

        <h1 class="sec-title">Welcome to FNN</h1>
        <p class="sec-sub">
          A modern art platform specializing in the presentation of original artworks by selected artists‚Äîconnecting creative expression with audiences and institutions.
        </p>

        <button class="btn-hero" onclick="switchSection('sect-gallery')">Explore Collection</button>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="sect-about" class="app-section">
      <div class="section-scroll">
        <h1 class="sec-title">About FNN</h1>

        <p class="sec-sub" style="white-space:pre-line">
FNN is a modern art platform specializing in the presentation of original artworks by selected artists. Its mission is to elevate art as a cultural value and creative identity by providing a professional environment that honors both the artist and the artwork, while connecting creative expression with audiences and art institutions. FNN aspires to become the Art Content Center (NDCC) for the art scene in the Kingdom of Saudi Arabia.

On the other hand, FNN (2018‚Äìpresent) refers to a growing cultural and artistic initiative encompassing curated exhibitions, original art productions, experimental formats, and content-driven platforms that position art as both cultural capital and contemporary dialogue.

In Arts & Culture:
‚Ä¢ Curated Art Platforms: FNN presents original works by selected local and international artists, focusing on contemporary practices, conceptual art, and emerging creative voices.
‚Ä¢ Art Objects & Installations: Commissioned artworks, sculptural pieces, mixed-media works, and limited-edition art objects developed or showcased under the FNN platform.
‚Ä¢ Exhibitions & Programs: Gallery-style presentations, pop-up exhibitions, collaborations with institutions, and thematic art programs that explore identity, place, and modern culture.
‚Ä¢ Publications & Art Content: Art documentation, essays, catalogs, and digital content positioning FNN as a reference point for contemporary art discourse in the region.

In Creative Infrastructure:
‚Ä¢ Art Content Center (NDCC): FNN operates as a central node for art content creation, curation, archiving, and distribution, bridging artists, collectors, institutions, and the public.
‚Ä¢ Cultural Partnerships: Collaboration with museums, cultural entities, developers, and brands to integrate art into public spaces and cultural developments.
‚Ä¢ Digital Presence: Online exhibitions, artist profiles, and visual archives that extend the physical art experience into digital and media platforms.

In Media & Cultural Impact:
‚Ä¢ Cultural Narrative Building: FNN contributes to shaping Saudi Arabia‚Äôs contemporary art narrative by positioning art as a living, evolving cultural identity.
‚Ä¢ Audience Engagement: Creating accessible yet elevated art experiences that connect diverse audiences with contemporary creative expression.
        </p>

        <!-- ‚úÖ image deleted as requested -->
      </div>
    </section>

    <!-- SERVICES -->
    <section id="sect-services" class="app-section">
      <div class="section-scroll">
        <h1 class="sec-title">Services</h1>
        <p class="sec-sub">A complete pipeline‚Äîfrom creative direction to installation‚Äîbuilt for quality, clarity, and impact.</p>

        <div class="services-wrap">
          <div class="services-grid" id="servicesGrid">
            <!-- 12 service cards -->
            <div class="svc-card"><div class="svc-ico">‚óé</div><h3 class="svc-title">Creative Planning</h3><p class="svc-desc">Sculptural and contemporary art planning‚Äîtranslating culture into form.</p></div>
            <div class="svc-card"><div class="svc-ico">‚úé</div><h3 class="svc-title">Original design</h3><p class="svc-desc">Original concepts inspired by renowned artists and professional teams.</p></div>
            <div class="svc-card"><div class="svc-ico">‚ñ§</div><h3 class="svc-title">Excellent structure</h3><p class="svc-desc">Qualification-led analysis‚Äîensuring stability, safety, and longevity.</p></div>
            <div class="svc-card"><div class="svc-ico">‚ú∂</div><h3 class="svc-title">Crafted with ingenuity</h3><p class="svc-desc">Refined execution where detail, patience, and intent define the final work.</p></div>

            <div class="svc-card"><div class="svc-ico">‚åÇ</div><h3 class="svc-title">Professional installation</h3><p class="svc-desc">Integrated workflows for safe, precise, and reliable delivery on site.</p></div>
            <div class="svc-card"><div class="svc-ico">‚åÅ</div><h3 class="svc-title">Refurbishment & Restoration</h3><p class="svc-desc">Renovation and care‚Äîbringing works back to life with expert teams.</p></div>
            <div class="svc-card"><div class="svc-ico">‚ñ¢</div><h3 class="svc-title">Art rental</h3><p class="svc-desc">Rental services for sculptures and artworks‚Äîsupporting programs & projects.</p></div>
            <div class="svc-card"><div class="svc-ico">‚åñ</div><h3 class="svc-title">Site survey</h3><p class="svc-desc">On-site inspection and coordination‚Äîaligning implementation to vision.</p></div>

            <div class="svc-card"><div class="svc-ico">‚óá</div><h3 class="svc-title">Curatorial services</h3><p class="svc-desc">Research, selection, and presentation strategy for exhibitions and collections.</p></div>
            <div class="svc-card"><div class="svc-ico">üéß</div><h3 class="svc-title">Art Consultant</h3><p class="svc-desc">Concept proposals, guidance, and recommendations tailored to your space.</p></div>
            <div class="svc-card"><div class="svc-ico">‚óî</div><h3 class="svc-title">Art broker</h3><p class="svc-desc">Market services connecting institutions, collectors, and artists‚Äîlocally and globally.</p></div>
            <div class="svc-card"><div class="svc-ico">‚ßâ</div><h3 class="svc-title">Artistic Supervisor</h3><p class="svc-desc">Quality monitoring, materials review, and execution supervision end-to-end.</p></div>
          </div>

          <!-- OUR PROCESS (white theme + single moving dot + full 1->8 line) -->
          <div class="process" id="processBlock">
            <div class="process-head">
              <h2>Our process</h2>
              <p>8 clear steps‚Äîfrom discovery to delivery‚Äîdesigned to keep quality high and execution smooth.</p>
            </div>

            <div class="process-grid" id="processGrid">
              <div class="proc-rail">
                <div class="proc-line"></div>
                <div class="proc-dot" id="procDot"></div>
              </div>

              <div class="proc-items" id="procItems">
                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 1</div>
                    <h3 class="proc-title">Discovery & Direction</h3>
                    <p class="proc-desc">Define goals, context, constraints, and the cultural story you want the work to carry.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>

                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 2</div>
                    <h3 class="proc-title">Concept & References</h3>
                    <p class="proc-desc">Moodboards, precedents, and initial concepts aligned with the site and audience.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>

                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 3</div>
                    <h3 class="proc-title">Design Development</h3>
                    <p class="proc-desc">Refine form, materials, scale, and presentation details with clear approvals.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>

                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 4</div>
                    <h3 class="proc-title">Engineering Review</h3>
                    <p class="proc-desc">Structural checks, safety planning, and feasibility for production & installation.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>

                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 5</div>
                    <h3 class="proc-title">Production Planning</h3>
                    <p class="proc-desc">Scheduling, sourcing, and documentation to keep quality consistent.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>

                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 6</div>
                    <h3 class="proc-title">Fabrication & Build</h3>
                    <p class="proc-desc">Craft, finishing, and quality checks‚Äîexecuted with high attention to detail.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>

                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 7</div>
                    <h3 class="proc-title">Installation & On-site</h3>
                    <p class="proc-desc">Professional installation, safety protocol, and site coordination.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>

                <div class="proc-step">
                  <div>
                    <div class="proc-kicker">Step 8</div>
                    <h3 class="proc-title">Handover & Care</h3>
                    <p class="proc-desc">Final delivery, documentation, and care recommendations for longevity.</p>
                  </div>
                  <div class="proc-illus">Illustration</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="sect-gallery" class="app-section active-section">
      <header class="shop-head">
        <nav class="nav-group" id="filters">
          <button class="chip active" data-filter="all" id="btnAll">ALL</button>
          <button class="chip" data-filter="cabinet">Cabinets</button>
          <button class="chip" data-filter="sideboard">Sideboards</button>
          <button class="chip" data-filter="decor">Decor</button>
        </nav>
      </header>

      <div class="shop-body">
        <div class="grid" id="grid"></div>

        <div class="solo-wrap" id="soloWrap">
          <div class="back-nav"><button class="btn-back" id="btnBack">‚Üê Back to Collection</button></div>

          <!-- ‚úÖ Product name above frame -->
          <div class="solo-name" id="soloName">PRODUCT</div>

          <!-- ‚úÖ 16:9 frame -->
          <div class="solo-media-container" id="soloMedia"></div>

          <div class="solo-info-block">
            <div class="solo-desc">
              <strong id="soloTitle">PRODUCT</strong><br>
              Contemporary design meeting functionality.
              <div class="data-row">
                <div class="data-item"><span>Material</span><span id="spMat">--</span></div>
                <div class="data-item"><span>Dimensions</span><span id="spDim">--</span></div>
                <div class="data-item"><span>Location</span><span id="soloStore">--</span></div>
              </div>
            </div>

            <div class="artist-profile" id="artistBtn">
              <div class="avatar"><img id="artistImg" src="" alt="Designer"></div>
              <div class="artist-info"><h4 id="artistName">--</h4><p id="artistRole">--</p></div>
              <div class="artist-cta">View Bio ‚Üí</div>
            </div>

            <div class="actions">
              <button class="btn btn-primary" id="btnContactProduct">Contact Us</button>
              <button class="btn btn-ghost" id="btnClose">Close</button>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="sect-contact" class="app-section">
      <div class="section-scroll">
        <h1 class="sec-title">Get in Touch</h1>
        <p class="sec-sub">Interested in a piece? Let us know.</p>

        <form id="ajaxForm" action="https://formsubmit.co/anaskaroti@gmail.com" method="POST">
          <input type="hidden" name="_captcha" value="false">
          <input type="hidden" name="_template" value="table">

          <div class="form-group"><input type="text" class="form-input" name="name" placeholder="Your Name" required></div>
          <div class="form-group"><input type="email" class="form-input" name="email" placeholder="Your Email" required></div>
          <div class="form-group"><input type="text" class="form-input" name="subject" placeholder="Subject" id="formSubject"></div>
          <div class="form-group"><textarea class="form-input" name="message" placeholder="Message..." rows="4"></textarea></div>

          <button type="submit" class="btn-submit" id="formSubmitBtn">Send Inquiry</button>
        </form>

        <div id="formSuccess">Thank you! Your inquiry has been received.</div>
      </div>
    </section>

  </aside>
</div>

<!-- ARTIST MODAL -->
<div class="modal-overlay" id="modalArtistOverlay">
  <div class="modal-box" style="position:relative">
    <button class="close-modal" id="closeArtistModal">√ó</button>
    <div style="text-align:center; margin-bottom:18px;">
      <div style="width:82px;height:82px;border-radius:50%;overflow:hidden;margin:0 auto 14px;">
        <img id="modalArtistImg" src="" alt="" style="width:100%;height:100%;object-fit:cover;">
      </div>
      <h3 id="modalArtistName" style="margin:0 0 6px; font-weight:950;"></h3>
      <span id="modalArtistRole" style="font-size:12px; color:#999; text-transform:uppercase; letter-spacing:0.08em;"></span>
    </div>
    <p id="modalArtistBio" style="font-size:13px; line-height:1.7; color:#555; text-align:center; margin:0;"></p>
  </div>
</div>

<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.3.0/model-viewer.min.js"></script>
<script src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js"></script>

<script>
  /* ===== MAP CONFIG ===== */
  const MAPBOX_TOKEN = "pk.eyJ1IjoiYW5hc2thcm90aSIsImEiOiJjbWhqcHgwcmMwbWM0MmxwZ2V5Z2x5OTN0In0.bpOf-4BsljExZdYZUak_pw";
  const USER_STYLE = "mapbox://styles/anaskaroti/cmhuiic1f00ft01qucn91gk6e";

  mapboxgl.accessToken = MAPBOX_TOKEN;
  const isMobile = window.innerWidth < 900;
  const startZoom = isMobile ? 0 : 0.8;

  const map = new mapboxgl.Map({
    container: "map",
    style: USER_STYLE,
    center: [0, 20],
    zoom: startZoom,
    pitch: 0,
    projection: 'globe'
  });

  map.on('style.load', () => {
    try {
      map.setFog({
        'color': 'rgb(255, 255, 255)',
        'high-color': 'rgb(200, 200, 200)',
        'space-color': 'rgb(0, 0, 0)',
        'star-intensity': 0.6
      });
    } catch(e){}

    const layers = map.getStyle().layers || [];
    let labelLayerId;
    for (const layer of layers) {
      if (layer.type === 'symbol' && layer.layout && layer.layout['text-field']) {
        labelLayerId = layer.id;
        break;
      }
    }

    if (!map.getLayer('3d-buildings-custom')) {
      try{
        map.addLayer({
          'id': '3d-buildings-custom',
          'source': 'composite',
          'source-layer': 'building',
          'filter': ['==', 'extrude', 'true'],
          'type': 'fill-extrusion',
          'minzoom': 15,
          'paint': {
            'fill-extrusion-color': '#aaa',
            'fill-extrusion-height': ['get', 'height'],
            'fill-extrusion-base': ['get', 'min_height'],
            'fill-extrusion-opacity': 0.6
          }
        }, labelLayerId);
      } catch(e){}
    }
  });

  /* ===== NAVIGATION ===== */
  window.switchSection = function(id){
    document.querySelectorAll('.app-section').forEach(s => s.classList.remove('active-section'));
    const target = document.getElementById(id);
    if(target) target.classList.add('active-section');

    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    const navIdMap = {
      'sect-home':'navHome',
      'sect-about':'navAbout',
      'sect-services':'navServices',
      'sect-gallery':'navGallery',
      'sect-contact':'navContact'
    };
    const mNavIdMap = {
      'sect-home':'mNavHome',
      'sect-about':'mNavAbout',
      'sect-services':'mNavServices',
      'sect-gallery':'mNavGallery',
      'sect-contact':'mNavContact'
    };

    const navEl = document.getElementById(navIdMap[id]);
    if(navEl) navEl.classList.add('active');
    const mNavEl = document.getElementById(mNavIdMap[id]);
    if(mNavEl) mNavEl.classList.add('active');

    if(id === 'sect-home'){
      map.flyTo({ center:[0,20], zoom:startZoom, pitch:0, bearing:0, duration:1800 });
    }

    // recompute process geometry whenever we open services
    if(id === 'sect-services'){
      requestAnimationFrame(() => {
        setupProcessAnimation();
      });
    }
  };

  const safeAdd = (id, ev, handler) => {
    const el = document.getElementById(id);
    if(el) el.addEventListener(ev, handler);
  };

  // desktop nav
  safeAdd('navHome','click',() => switchSection('sect-home'));
  safeAdd('navAbout','click',() => switchSection('sect-about'));
  safeAdd('navServices','click',() => switchSection('sect-services'));
  safeAdd('navGallery','click',() => switchSection('sect-gallery'));
  safeAdd('navContact','click',() => switchSection('sect-contact'));

  // mobile nav
  safeAdd('mNavHome','click',() => switchSection('sect-home'));
  safeAdd('mNavAbout','click',() => switchSection('sect-about'));
  safeAdd('mNavServices','click',() => switchSection('sect-services'));
  safeAdd('mNavGallery','click',() => switchSection('sect-gallery'));
  safeAdd('mNavContact','click',() => switchSection('sect-contact'));

  /* ===== FORM ===== */
  const form = document.getElementById('ajaxForm');
  const submitBtn = document.getElementById('formSubmitBtn');
  const successMsg = document.getElementById('formSuccess');

  if(form){
    form.addEventListener('submit', function(e){
      e.preventDefault();
      if(submitBtn){ submitBtn.textContent="Sending..."; submitBtn.style.opacity="0.7"; }
      fetch(form.action, { method:"POST", body:new FormData(form), headers:{ 'Accept':'application/json' } })
      .then(res => {
        if(res.ok){
          form.style.display="none";
          if(successMsg) successMsg.style.display="block";
        } else {
          alert("Oops! Problem submitting.");
          if(submitBtn) submitBtn.textContent="Try Again";
        }
      })
      .catch(() => {
        alert("Oops! Problem submitting.");
        if(submitBtn) submitBtn.textContent="Try Again";
      });
    });
  }

  /* ===== MAP ANIMATION (product goto) ===== */
  let currentMarker = null;
  let rotationFrame = null;

  function gotoStore(store){
    if(!store) return;
    if(rotationFrame){ cancelAnimationFrame(rotationFrame); rotationFrame=null; }
    if(currentMarker) currentMarker.remove();

    const el = document.createElement('div');
    el.style.backgroundColor='#111';
    el.style.width='20px';
    el.style.height='20px';
    el.style.borderRadius='50%';
    el.style.border='2px solid white';

    currentMarker = new mapboxgl.Marker(el).setLngLat(store.coords).addTo(map);

    map.flyTo({
      center: store.coords,
      zoom: 16.5,
      pitch: 65,
      bearing: Math.random()*90,
      speed: 0.3,
      curve: 1.2,
      essential: true,
      duration: 9000
    });

    map.once('moveend', () => {
      function rotate(){
        map.rotateTo((map.getBearing()+0.05)%360, { duration:0 });
        rotationFrame = requestAnimationFrame(rotate);
      }
      rotate();
    });
  }

  /* ===== PRODUCT MEDIA (Images / 360 / Video / 3D) ===== */
  const DEFAULT_IMAGES = [
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9c47857d958372698_Gemini_Generated_Image_yiit8eyiit8eyiit.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9fd2fa99da51c575a_Gemini_Generated_Image_qrrx4iqrrx4iqrrx.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9978004d5fa2a3d3a_Gemini_Generated_Image_6hnali6hnali6hna.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca9ff7c4713583ae7b5_Gemini_Generated_Image_im37uhim37uhim37.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca8c4a4dc0af86da352_Gemini_Generated_Image_rn5h5urn5h5urn5h.png",
    "https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/693c1ca8c641d77b3de17010_Gemini_Generated_Image_mhci8mmhci8mmhci.png"
  ];

  const VIDEO_360 = "https://raw.githubusercontent.com/lwiise/3d-models/main/Product_Video_Generation_With_Rotation.mp4";
  const VIDEO_NORMAL = "https://raw.githubusercontent.com/lwiise/3d-models/main/Artistic_Video_Generation_Request.mp4";

  function buildMediaTabs(active){
    const tabs = [
      { key:'images', label:'Images' },
      { key:'v360', label:'360' },
      { key:'video', label:'Video' },
      { key:'d3', label:'3D' }
    ];
    return `
      <div class="media-tabs" id="mediaTabs">
        ${tabs.map(t => `
          <button class="media-tab ${t.key===active?'active':''}" data-tab="${t.key}">${t.label}</button>
        `).join('')}
      </div>
    `;
  }

  function renderImages(images){
    let idx = 0;
    const html = `
      ${buildMediaTabs('images')}
      <img id="imgSlide" src="${images[0]}" alt="Image" />
      <button class="img-arrow left" id="imgPrev">‚Äπ</button>
      <button class="img-arrow right" id="imgNext">‚Ä∫</button>
    `;
    return { html, mount: (container) => {
      const img = container.querySelector('#imgSlide');
      const prev = container.querySelector('#imgPrev');
      const next = container.querySelector('#imgNext');

      const show = () => { if(img) img.src = images[idx]; };
      if(prev) prev.onclick = () => { idx = (idx - 1 + images.length) % images.length; show(); };
      if(next) next.onclick = () => { idx = (idx + 1) % images.length; show(); };
    }};
  }

  function render360(){
    const html = `
      ${buildMediaTabs('v360')}
      <video id="v360" src="${VIDEO_360}" playsinline preload="metadata"></video>
      <div class="v360-ui">
        <button class="v360-btn" id="v360Toggle">II</button>
        <input class="v360-range" id="v360Range" type="range" min="0" max="1000" value="0" />
      </div>
    `;
    return { html, mount: (container) => {
      const v = container.querySelector('#v360');
      const btn = container.querySelector('#v360Toggle');
      const range = container.querySelector('#v360Range');

      if(!v || !btn || !range) return;

      v.controls = false;          // ‚úÖ no native player UI
      v.loop = true;
      v.muted = true;
      v.play().catch(()=>{});

      const syncRange = () => {
        if(!v.duration || !isFinite(v.duration)) return;
        range.value = Math.floor((v.currentTime / v.duration) * 1000);
      };

      v.addEventListener('timeupdate', syncRange);

      range.addEventListener('input', () => {
        if(!v.duration || !isFinite(v.duration)) return;
        const t = (parseInt(range.value,10)/1000) * v.duration;
        v.currentTime = t;
      });

      btn.addEventListener('click', () => {
        if(v.paused){
          v.play().catch(()=>{});
          btn.textContent = "II";
        }else{
          v.pause();
          btn.textContent = "‚ñ∂";
        }
      });
    }};
  }

  function renderVideo(){
    const html = `
      ${buildMediaTabs('video')}
      <video src="${VIDEO_NORMAL}" controls playsinline preload="metadata"></video>
    `;
    return { html, mount: ()=>{} };
  }

  function render3D(modelUrl, fallbackImg, productName){
    const safeUrl = (modelUrl || "").replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/ /g,'%20');
    const html = `
      ${buildMediaTabs('d3')}
      <model-viewer
        id="viewer3d"
        src="${safeUrl}"
        camera-controls
        auto-rotate
        shadow-intensity="1"
        style="background:transparent; width:100%; height:100%;"
        camera-orbit="45deg 75deg 3m"
        environment-image="neutral"
        alt="${productName || '3D'}">
      </model-viewer>
    `;
    return { html, mount: (container) => {
      const viewer = container.querySelector('#viewer3d');
      if(viewer){
        viewer.addEventListener('error', () => {
          container.innerHTML = buildMediaTabs('images') + `<img src="${fallbackImg}" alt="Fallback" />`;
        });
      }
    }};
  }

  function attachTabHandlers(p){
    const soloMedia = document.getElementById("soloMedia");
    if(!soloMedia) return;

    const tabs = soloMedia.querySelector('#mediaTabs');
    if(!tabs) return;

    tabs.addEventListener('click', (e) => {
      const btn = e.target.closest('.media-tab');
      if(!btn) return;
      const tab = btn.dataset.tab;
      let pack;

      if(tab === 'images') pack = renderImages(p.images || DEFAULT_IMAGES);
      if(tab === 'v360') pack = render360();
      if(tab === 'video') pack = renderVideo();
      if(tab === 'd3') pack = render3D(p.model, (p.images && p.images[0]) ? p.images[0] : p.img, p.name);

      if(!pack) return;

      soloMedia.innerHTML = pack.html;
      pack.mount(soloMedia);
      attachTabHandlers(p);
    });
  }

  /* ===== DATA ===== */
  const PRODUCTS = [
    { id:"item-1", name:"Arch Cabinet", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a23d0fd8b7e2bc457_Screenshot_2025-11-23_141726-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(5).glb", specs:{ mat:"Velvet & Wood", dim:"120x60x90" }, store:{ name:"Milan Design District", coords:[9.1900,45.4642] }, artist:{ name:"Alessandro Rossi", role:"Art Director, Milano", img:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=100&q=80", bio:"Alessandro combines classical Italian joinery with bold, modern geometric forms." } },
    { id:"item-2", name:"Geometric Side", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a7e9f217180e18c6d_Screenshot_2025-11-23_142545-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20%289%29.glb", specs:{ mat:"Lacquered Wood", dim:"180x50x200" }, store:{ name:"Paris Le Marais", coords:[2.3522,48.8566] }, artist:{ name:"Claire Dubois", role:"Sculptor, Paris", img:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?auto=format&fit=crop&w=100&q=80", bio:"Claire challenges the perception of stability with her organic, tree-like structures." } },
    { id:"item-3", name:"Art Deco Tall", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a3f4cd0cdf6848da0_Screenshot_2025-11-23_142423-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(7).glb", specs:{ mat:"Marble & Brass", dim:"220x80x95" }, store:{ name:"New York SoHo", coords:[-74.006,40.7128] }, artist:{ name:"Marcus Thorne", role:"Industrial Designer, NY", img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=100&q=80", bio:"Marcus revives 1920s Art Deco aesthetics for the modern Manhattan loft." } },
    { id:"item-4", name:"Striped Console", category:"decor", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a8659147dcb3f38ed_Screenshot_2025-11-23_142604-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1763910785694_base%20(4).glb", specs:{ mat:"Resin & Paint", dim:"100x60x140" }, store:{ name:"Tokyo Harajuku", coords:[139.7034,35.6719] }, artist:{ name:"Kenji Sato", role:"Pop Artist, Tokyo", img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=100&q=80", bio:"Kenji blurs the lines between collectible toys and functional high-end furniture." } },
    { id:"item-5", name:"Radiance Credenza", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a361104af2bd0614b_Screenshot_2025-11-23_142501-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20(8).compressed.glb", specs:{ mat:"Ebony & Gold", dim:"200x55x85" }, store:{ name:"Dubai Design Dist", coords:[55.2962,25.2769] }, artist:{ name:"Zara Al-Fayed", role:"Luxury Artisan, Dubai", img:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?auto=format&fit=crop&w=100&q=80", bio:"Zara's work is a fusion of traditional Middle Eastern patterns and ultra-modern luxury." } },
    { id:"item-6", name:"Modular Unit", category:"decor", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/6923267a36286c4236e924d2_Screenshot_2025-11-23_142346-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/base%20%286%29.glb", specs:{ mat:"Ceramic Composite", dim:"120x120x120" }, store:{ name:"Copenhagen", coords:[12.5683,55.6761] }, artist:{ name:"Erik Jensen", role:"Minimalist, Copenhagen", img:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&w=100&q=80", bio:"Erik believes in infinite adaptability. His modular systems grow with the user." } },
    { id:"item-7", name:"Lunar Chest", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620c47e4acac61094bf_Screenshot_2025-11-24_171517-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071266806_base%20(15).glb", specs:{ mat:"Oak & Silver", dim:"110x55x130" }, store:{ name:"London Tate Modern", coords:[-0.099,51.507] }, artist:{ name:"Oliver Sterling", role:"Modernist, London", img:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&w=100&q=80", bio:"Oliver explores celestial themes using industrial materials." } },
    { id:"item-8", name:"Obsidian Block", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620636bab60cf866e4e_Screenshot_2025-11-24_171459-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071270533_base%20(14).glb", specs:{ mat:"Blackened Steel", dim:"200x60x80" }, store:{ name:"Berlin Mitte", coords:[13.405,52.520] }, artist:{ name:"Klaus Weber", role:"Architect, Berlin", img:"https://images.unsplash.com/photo-1492562080023-ab3db95bfbce?auto=format&fit=crop&w=100&q=80", bio:"Klaus brings brutalist architecture principles into interior design." } },
    { id:"item-9", name:"Azure Tower", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620466eab1b5ac247c4_Screenshot_2025-11-24_171450-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071273205_base%20(13).glb", specs:{ mat:"Blue Lacquer", dim:"80x80x180" }, store:{ name:"Barcelona Eixample", coords:[2.168,41.387] }, artist:{ name:"Sofia Mir√≥", role:"Colorist, Barcelona", img:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&w=100&q=80", bio:"Sofia's work is a vibrant homage to the Mediterranean spirit." } },
    { id:"item-10", name:"Solar Credenza", category:"sideboard", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/692486204f857514d1d4b590_Screenshot_2025-11-24_171432-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071348834_base%20(12).glb", specs:{ mat:"Teak & Brass", dim:"220x50x75" }, store:{ name:"Mexico City Polanco", coords:[-99.19,19.43] }, artist:{ name:"Diego Rivera", role:"Carpenter, CDMX", img:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&w=100&q=80", bio:"Diego fuses Aztec geometry with mid-century modern lines." } },
    { id:"item-11", name:"Nordic Wave", category:"decor", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620b770e284e36cee5d_Screenshot_2025-11-24_171419-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071190268_base%20(11).glb", specs:{ mat:"Ash Wood", dim:"140x40x90" }, store:{ name:"Stockholm S√∂dermalm", coords:[18.068,59.329] }, artist:{ name:"Elina Vinter", role:"Designer, Stockholm", img:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?auto=format&fit=crop&w=100&q=80", bio:"Elina captures the fluidity of water in solid wood forms." } },
    { id:"item-12", name:"Crimson Vanity", category:"cabinet", img:"https://cdn.prod.website-files.com/6915e045b3e3d5a1e709a05d/69248620cbc59348dc423f83_Screenshot_2025-11-24_171401-removebg-preview.png", model:"https://raw.githubusercontent.com/lwiise/3d-models/main/compressed_1764071194478_base%20(10).glb", specs:{ mat:"Red Velvet & Gold", dim:"100x50x150" }, store:{ name:"Seoul Gangnam", coords:[127.027,37.497] }, artist:{ name:"Min-Jun Kim", role:"Fashion Designer, Seoul", img:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?auto=format&fit=crop&w=100&q=80", bio:"Min-Jun treats furniture like haute couture, focusing on texture and drama." } }
  ];

  const grid = document.getElementById("grid");
  const soloMedia = document.getElementById("soloMedia");

  function render(list){
    if(!grid) return;
    grid.innerHTML = "";
    list.forEach(p => {
      const el = document.createElement("article");
      el.className = "card";
      el.innerHTML = `
        <div class="card-media"><img src="${p.img}" alt="${p.name}"/></div>
        <div class="card-name">${p.name}</div>
        <div class="card-sub">Edition 2024</div>
      `;
      el.addEventListener("click", () => openSolo(p));
      grid.appendChild(el);
    });
  }

  const filtersEl = document.getElementById("filters");
  if(filtersEl){
    filtersEl.addEventListener("click", e => {
      const btn = e.target.closest(".chip");
      if(!btn) return;
      document.querySelectorAll(".chip").forEach(c => c.classList.remove("active"));
      btn.classList.add("active");
      const f = btn.dataset.filter;
      render(f === "all" ? PRODUCTS : PRODUCTS.filter(p => p.category === f));
    });
  }

  function openSolo(p){
    document.getElementById("shop").classList.add("solo");
    document.getElementById("sect-gallery").classList.add("solo");

    // product name above frame
    const soloName = document.getElementById("soloName");
    if(soloName) soloName.textContent = p.name;

    document.getElementById("soloTitle").textContent = p.name.toUpperCase();
    document.getElementById("soloStore").textContent = p.store.name;
    document.getElementById("spMat").textContent = p.specs.mat;
    document.getElementById("spDim").textContent = p.specs.dim;

    document.getElementById("artistName").textContent = p.artist.name;
    document.getElementById("artistRole").textContent = p.artist.role;
    document.getElementById("artistImg").src = p.artist.img;

    document.getElementById("modalArtistName").textContent = p.artist.name;
    document.getElementById("modalArtistRole").textContent = p.artist.role;
    document.getElementById("modalArtistImg").src = p.artist.img;
    document.getElementById("modalArtistBio").textContent = p.artist.bio;

    const fs = document.getElementById("formSubject");
    if(fs) fs.value = "Inquiry: " + p.name;

    // focus nav bg
    const sideNav = document.querySelector('.side-nav');
    if(sideNav) sideNav.classList.add('focused');

    // default: images
    const pack = renderImages(p.images || DEFAULT_IMAGES);
    soloMedia.innerHTML = pack.html;
    pack.mount(soloMedia);
    attachTabHandlers(p);

    gotoStore(p.store);
  }

  function closeSolo(){
    const shopEl = document.getElementById("shop");
    const galleryEl = document.getElementById("sect-gallery");
    if(shopEl) shopEl.classList.remove("solo");
    if(galleryEl) galleryEl.classList.remove("solo");

    const sideNav = document.querySelector('.side-nav');
    if(sideNav) sideNav.classList.remove('focused');

    if(rotationFrame){ cancelAnimationFrame(rotationFrame); rotationFrame=null; }
    const isMobileReset = window.innerWidth < 900;
    map.flyTo({ center:[0,20], zoom:isMobileReset ? 0 : 0.8, pitch:0, bearing:0, duration:2200 });
  }

  safeAdd("btnBack","click",closeSolo);
  safeAdd("btnClose","click",closeSolo);
  safeAdd("btnContactProduct","click",() => switchSection('sect-contact'));

  /* ===== ARTIST MODAL ===== */
  const modalArtist = document.getElementById("modalArtistOverlay");
  const artistBtnEl = document.getElementById("artistBtn");
  if(artistBtnEl) artistBtnEl.addEventListener("click", () => modalArtist && modalArtist.classList.add("open"));
  safeAdd("closeArtistModal","click", () => modalArtist && modalArtist.classList.remove("open"));
  window.addEventListener("click", (e) => { if(e.target === modalArtist) modalArtist.classList.remove("open"); });

  /* ===== OUR PROCESS ANIMATION (FIXED TO STEP 8) ===== */
  function setupProcessAnimation(){
    const dot = document.getElementById("procDot");
    const itemsWrap = document.getElementById("procItems");
    const grid = document.getElementById("processGrid");
    if(!dot || !itemsWrap || !grid) return;

    const steps = Array.from(itemsWrap.querySelectorAll(".proc-step"));
    const rail = grid.querySelector(".proc-rail");
    const line = rail ? rail.querySelector(".proc-line") : null;
    if(!steps.length || !rail || !line) return;

    // scroller is the SERVICES scroll container
    const scroller = document.querySelector("#sect-services .section-scroll");
    if(!scroller) return;

    let centers = [];

    const computeGeometry = () => {
      rail.style.height = itemsWrap.offsetHeight + "px";

      const railRect = rail.getBoundingClientRect();
      centers = steps.map(step => {
        const r = step.getBoundingClientRect();
        const c = (r.top + r.bottom) / 2;
        return c - railRect.top;
      });

      if(centers.length < 2) return;

      // line from step 1 to step 8
      const top = centers[0];
      const height = centers[centers.length - 1] - centers[0];
      line.style.top = `${top}px`;
      line.style.height = `${Math.max(0, height)}px`;
      line.style.bottom = "auto";

      // dot initial
      dot.style.transform = `translate(-50%, ${top - 9}px)`;
    };

    const moveDotToClosestStep = () => {
      if(!centers.length) return;

      const scRect = scroller.getBoundingClientRect();
      const targetY = scRect.top + scRect.height * 0.45;

      let bestIndex = 0;
      let bestDist = Infinity;

      for(let i=0;i<steps.length;i++){
        const r = steps[i].getBoundingClientRect();
        const c = (r.top + r.bottom) / 2;
        const d = Math.abs(c - targetY);
        if(d < bestDist){
          bestDist = d;
          bestIndex = i;
        }
      }

      const y = centers[bestIndex];
      dot.style.transform = `translate(-50%, ${y - 9}px)`;
    };

    let raf = null;
    const onScroll = () => {
      if(raf) return;
      raf = requestAnimationFrame(() => {
        raf = null;
        computeGeometry();
        moveDotToClosestStep();
      });
    };

    requestAnimationFrame(() => {
      computeGeometry();
      moveDotToClosestStep();
    });

    scroller.addEventListener("scroll", onScroll, { passive:true });
    window.addEventListener("resize", () => {
      computeGeometry();
      moveDotToClosestStep();
    });
  }

  /* ===== INIT ===== */
  (function init(){
    // default section: gallery
    render(PRODUCTS);

    // ensure nav active
    document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
    const navGallery = document.getElementById('navGallery');
    if(navGallery) navGallery.classList.add('active');
    const mNavGallery = document.getElementById('mNavGallery');
    if(mNavGallery) mNavGallery.classList.add('active');

    // init process animation
    setupProcessAnimation();
  })();
</script>
</body>
</html>
